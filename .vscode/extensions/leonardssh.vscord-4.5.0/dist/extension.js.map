{"version":3,"file":"extension.js","mappings":"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C7B7L,MAAM8L,GAAMA,EAAEC,cAAc9R,KAAKiG,IAAM,IACnCA,EACHiE,KAAMwH,MAAMzL,EAAEiE,YAUpBlE,gBAAgBiH,MAAOrF,MAErB,aADM5C,KAAK0C,QAAQQ,YAAY6J,UAAWnK,KAAMqF,OACzC,CACL+E,YAAa,IAAMhN,KAAK0C,QAAQQ,YAAY+J,YAAarK,KAAMqF,QAOnEjH,sBACQhB,KAAKM,UAAU4M,iEC7oBzB,SAASC,UAAUC,KACjB,MAAMC,IAAM,GACZ,IAAK,MAAMC,SAASF,IAClBC,IAAIC,OAASA,MAEf,OAAOD,IAITzS,QAAQ2S,QAA4B,oBAAXC,OAEzB5S,QAAQsI,YAAciK,UAAU,CAC9B,WACA,YACA,eACA,YACA,aACA,cACA,eACA,wBACA,oBACA,WACA,YACA,cACA,0BACA,4BACA,uBACA,6BACA,sBACA,qBACA,uBACA,qBACA,mBACA,eACA,4BACA,8BACA,uBACA,yBACA,iBACA,YACA,uBACA,kCACA,oBACA,yBACA,UACA,kBACA,wBACA,YACA,eACA,eACA,eACA,sBACA,mBACA,wBACA,gBACA,iBACA,yBACA,8BACA,qBACA,+BACA,4BACA,8BACA,uBACA,yBACA,yBACA,iBACA,WACA,mBACA,wBACA,4BACA,0BACA,0BACA,uBACA,0BAGFvS,QAAQwI,UAAY+J,UAAU,CAC5B,sBACA,eACA,eACA,iBACA,sBACA,uBACA,qBACA,qBACA,qBACA,wBACA,0BACA,0BACA,iBACA,gBACA,YACA,gBACA,gBACA,wBACA,oBACA,kBACA,sBACA,iBACA,iBACA,iBACA,eACA,eACA,uBACA,0BACA,sBACA,gBACA,0BACA,UACA,iBACA,qBACA,qBACA,0BACA,QACA,UAGFvS,QAAQ6S,UAAY,CAClBC,mCAAoC,KACpCC,oBAAqB,KACrBC,8BAA+B,KAC/BC,wBAAyB,KACzBC,gBAAiB,KACjBC,iBAAkB,KAClBC,gBAAiB,KACjBC,oBAAqB,KACrBC,cAAe,KACfC,kBAAmB,KACnBC,cAAe,KACfC,eAAgB,KAChBC,cAAe,KACfC,qBAAsB,KACtBC,eAAg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","sources":["webpack://vscord/./node_modules/bindings/bindings.js","webpack://vscord/./node_modules/bufferutil/fallback.js","webpack://vscord/./node_modules/bufferutil/index.js","webpack://vscord/./node_modules/decode-uri-component/index.js","webpack://vscord/./node_modules/discord-rpc/src/client.js","webpack://vscord/./node_modules/discord-rpc/src/constants.js","webpack://vscord/./node_modules/discord-rpc/src/index.js","webpack://vscord/./node_modules/discord-rpc/src/transports/index.js","webpack://vscord/./node_modules/discord-rpc/src/transports/ipc.js","webpack://vscord/./node_modules/discord-rpc/src/transports/websocket.js","webpack://vscord/./node_modules/discord-rpc/src/util.js","webpack://vscord/./node_modules/electron/index.js","webpack://vscord/./node_modules/file-uri-to-path/index.js","webpack://vscord/./node_modules/filter-obj/index.js","webpack://vscord/./node_modules/git-up/lib/index.js","webpack://vscord/./node_modules/git-url-parse/lib/index.js","webpack://vscord/./node_modules/is-ssh/lib/index.js","webpack://vscord/./node_modules/node-gyp-build/index.js","webpack://vscord/./node_modules/normalize-url/index.js","webpack://vscord/./node_modules/parse-path/lib/index.js","webpack://vscord/./node_modules/parse-url/lib/index.js","webpack://vscord/./node_modules/protocols/lib/index.js","webpack://vscord/./node_modules/query-string/index.js","webpack://vscord/./node_modules/register-scheme/index.js","webpack://vscord/./node_modules/split-on-first/index.js","webpack://vscord/./node_modules/strict-uri-encode/index.js","webpack://vscord/./node_modules/tr46/index.js","webpack://vscord/external commonjs \"vscode\"","webpack://vscord/./src/logger.ts","webpack://vscord/./src/helpers/throttle.ts","webpack://vscord/./src/config.ts","webpack://vscord/./src/constants.ts","webpack://vscord/./src/data.ts","webpack://vscord/./src/helpers/isExcluded.ts","webpack://vscord/./src/helpers/resolveFileIcon.ts","webpack://vscord/./src/activity.ts","webpack://vscord/./src/helpers/isObject.ts","webpack://vscord/./src/extension.ts","webpack://vscord/./src/helpers/getApplicationId.ts","webpack://vscord/./node_modules/utf-8-validate/fallback.js","webpack://vscord/./node_modules/utf-8-validate/index.js","webpack://vscord/./node_modules/webidl-conversions/lib/index.js","webpack://vscord/./node_modules/whatwg-url/lib/URL-impl.js","webpack://vscord/./node_modules/whatwg-url/lib/URL.js","webpack://vscord/./node_modules/whatwg-url/lib/public-api.js","webpack://vscord/./node_modules/whatwg-url/lib/url-state-machine.js","webpack://vscord/./node_modules/whatwg-url/lib/utils.js","webpack://vscord/./node_modules/ws/index.js","webpack://vscord/./node_modules/ws/lib/buffer-util.js","webpack://vscord/./node_modules/ws/lib/constants.js","webpack://vscord/./node_modules/ws/lib/event-target.js","webpack://vscord/./node_modules/ws/lib/extension.js","webpack://vscord/./node_modules/ws/lib/limiter.js","webpack://vscord/./node_modules/ws/lib/permessage-deflate.js","webpack://vscord/./node_modules/ws/lib/receiver.js","webpack://vscord/./node_modules/ws/lib/sender.js","webpack://vscord/./node_modules/ws/lib/stream.js","webpack://vscord/./node_modules/ws/lib/validation.js","webpack://vscord/./node_modules/ws/lib/websocket-server.js","webpack://vscord/./node_modules/ws/lib/websocket.js","webpack://vscord/external node-commonjs \"crypto\"","webpack://vscord/external node-commonjs \"events\"","webpack://vscord/external node-commonjs \"fs\"","webpack://vscord/external node-commonjs \"http\"","webpack://vscord/external node-commonjs \"https\"","webpack://vscord/external node-commonjs \"net\"","webpack://vscord/external node-commonjs \"os\"","webpack://vscord/external node-commonjs \"path\"","webpack://vscord/external node-commonjs \"punycode\"","webpack://vscord/external node-commonjs \"stream\"","webpack://vscord/external node-commonjs \"timers\"","webpack://vscord/external node-commonjs \"tls\"","webpack://vscord/external node-commonjs \"url\"","webpack://vscord/external node-commonjs \"zlib\"","webpack://vscord/./node_modules/node-fetch/lib/index.mjs","webpack://vscord/webpack/bootstrap","webpack://vscord/webpack/runtime/compat get default export","webpack://vscord/webpack/runtime/define property getters","webpack://vscord/webpack/runtime/hasOwnProperty shorthand","webpack://vscord/webpack/runtime/make namespace object","webpack://vscord/webpack/startup"],"sourcesContent":["/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n  path = require('path'),\n  fileURLToPath = require('file-uri-to-path'),\n  join = path.join,\n  dirname = path.dirname,\n  exists =\n    (fs.accessSync &&\n      function(path) {\n        try {\n          fs.accessSync(path);\n        } catch (e) {\n          return false;\n        }\n        return true;\n      }) ||\n    fs.existsSync ||\n    path.existsSync,\n  defaults = {\n    arrow: process.env.NODE_BINDINGS_ARROW || '  ',\n    compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled',\n    platform: process.platform,\n    arch: process.arch,\n    nodePreGyp:\n      'node-v' +\n      process.versions.modules +\n      '-' +\n      process.platform +\n      '-' +\n      process.arch,\n    version: process.versions.node,\n    bindings: 'bindings.node',\n    try: [\n      // node-gyp's linked version in the \"build\" dir\n      ['module_root', 'build', 'bindings'],\n      // node-waf and gyp_addon (a.k.a node-gyp)\n      ['module_root', 'build', 'Debug', 'bindings'],\n      ['module_root', 'build', 'Release', 'bindings'],\n      // Debug files, for development (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Debug', 'bindings'],\n      ['module_root', 'Debug', 'bindings'],\n      // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Release', 'bindings'],\n      ['module_root', 'Release', 'bindings'],\n      // Legacy from node-waf, node <= 0.4.x\n      ['module_root', 'build', 'default', 'bindings'],\n      // Production \"Release\" buildtype binary (meh...)\n      ['module_root', 'compiled', 'version', 'platform', 'arch', 'bindings'],\n      // node-qbs builds\n      ['module_root', 'addon-build', 'release', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'debug', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'default', 'install-root', 'bindings'],\n      // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}\n      ['module_root', 'lib', 'binding', 'nodePreGyp', 'bindings']\n    ]\n  };\n\n/**\n * The main `bindings()` function loads the compiled bindings for a given module.\n * It uses V8's Error API to determine the parent filename that this function is\n * being invoked from, which is then used to find the root directory.\n */\n\nfunction bindings(opts) {\n  // Argument surgery\n  if (typeof opts == 'string') {\n    opts = { bindings: opts };\n  } else if (!opts) {\n    opts = {};\n  }\n\n  // maps `defaults` onto `opts` object\n  Object.keys(defaults).map(function(i) {\n    if (!(i in opts)) opts[i] = defaults[i];\n  });\n\n  // Get the module root\n  if (!opts.module_root) {\n    opts.module_root = exports.getRoot(exports.getFileName());\n  }\n\n  // Ensure the given bindings name ends with .node\n  if (path.extname(opts.bindings) != '.node') {\n    opts.bindings += '.node';\n  }\n\n  // https://github.com/webpack/webpack/issues/4175#issuecomment-342931035\n  var requireFunc =\n    typeof __webpack_require__ === 'function'\n      ? __non_webpack_require__\n      : require;\n\n  var tries = [],\n    i = 0,\n    l = opts.try.length,\n    n,\n    b,\n    err;\n\n  for (; i < l; i++) {\n    n = join.apply(\n      null,\n      opts.try[i].map(function(p) {\n        return opts[p] || p;\n      })\n    );\n    tries.push(n);\n    try {\n      b = opts.path ? requireFunc.resolve(n) : requireFunc(n);\n      if (!opts.path) {\n        b.path = n;\n      }\n      return b;\n    } catch (e) {\n      if (e.code !== 'MODULE_NOT_FOUND' &&\n          e.code !== 'QUALIFIED_PATH_RESOLUTION_FAILED' &&\n          !/not find/i.test(e.message)) {\n        throw e;\n      }\n    }\n  }\n\n  err = new Error(\n    'Could not locate the bindings file. Tried:\\n' +\n      tries\n        .map(function(a) {\n          return opts.arrow + a;\n        })\n        .join('\\n')\n  );\n  err.tries = tries;\n  throw err;\n}\nmodule.exports = exports = bindings;\n\n/**\n * Gets the filename of the JavaScript file that invokes this function.\n * Used to help find the root directory of a module.\n * Optionally accepts an filename argument to skip when searching for the invoking filename\n */\n\nexports.getFileName = function getFileName(calling_file) {\n  var origPST = Error.prepareStackTrace,\n    origSTL = Error.stackTraceLimit,\n    dummy = {},\n    fileName;\n\n  Error.stackTraceLimit = 10;\n\n  Error.prepareStackTrace = function(e, st) {\n    for (var i = 0, l = st.length; i < l; i++) {\n      fileName = st[i].getFileName();\n      if (fileName !== __filename) {\n        if (calling_file) {\n          if (fileName !== calling_file) {\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n    }\n  };\n\n  // run the 'prepareStackTrace' function above\n  Error.captureStackTrace(dummy);\n  dummy.stack;\n\n  // cleanup\n  Error.prepareStackTrace = origPST;\n  Error.stackTraceLimit = origSTL;\n\n  // handle filename that starts with \"file://\"\n  var fileSchema = 'file://';\n  if (fileName.indexOf(fileSchema) === 0) {\n    fileName = fileURLToPath(fileName);\n  }\n\n  return fileName;\n};\n\n/**\n * Gets the root directory of a module, given an arbitrary filename\n * somewhere in the module tree. The \"root directory\" is the directory\n * containing the `package.json` file.\n *\n *   In:  /home/nate/node-native-module/lib/index.js\n *   Out: /home/nate/node-native-module\n */\n\nexports.getRoot = function getRoot(file) {\n  var dir = dirname(file),\n    prev;\n  while (true) {\n    if (dir === '.') {\n      // Avoids an infinite loop in rare cases, like the REPL\n      dir = process.cwd();\n    }\n    if (\n      exists(join(dir, 'package.json')) ||\n      exists(join(dir, 'node_modules'))\n    ) {\n      // Found the 'package.json' file or 'node_modules' dir; we're done\n      return dir;\n    }\n    if (prev === dir) {\n      // Got to the top\n      throw new Error(\n        'Could not find module root given file: \"' +\n          file +\n          '\". Do you have a `package.json` file? '\n      );\n    }\n    // Try the parent dir next\n    prev = dir;\n    dir = join(dir, '..');\n  }\n};\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { setTimeout, clearTimeout } = require('timers');\nconst fetch = require('node-fetch');\nconst transports = require('./transports');\nconst { RPCCommands, RPCEvents, RelationshipTypes } = require('./constants');\nconst { pid: getPid, uuid } = require('./util');\n\nfunction subKey(event, args) {\n  return `${event}${JSON.stringify(args)}`;\n}\n\n/**\n * @typedef {RPCClientOptions}\n * @extends {ClientOptions}\n * @prop {string} transport RPC transport. one of `ipc` or `websocket`\n */\n\n/**\n * The main hub for interacting with Discord RPC\n * @extends {BaseClient}\n */\nclass RPCClient extends EventEmitter {\n  /**\n   * @param {RPCClientOptions} [options] Options for the client.\n   * You must provide a transport\n   */\n  constructor(options = {}) {\n    super();\n\n    this.options = options;\n\n    this.accessToken = null;\n    this.clientId = null;\n\n    /**\n     * Application used in this client\n     * @type {?ClientApplication}\n     */\n    this.application = null;\n\n    /**\n     * User used in this application\n     * @type {?User}\n     */\n    this.user = null;\n\n    const Transport = transports[options.transport];\n    if (!Transport) {\n      throw new TypeError('RPC_INVALID_TRANSPORT', options.transport);\n    }\n\n    this.fetch = (method, path, { data, query } = {}) =>\n      fetch(`${this.fetch.endpoint}${path}${query ? new URLSearchParams(query) : ''}`, {\n        method,\n        body: data,\n        headers: {\n          Authorization: `Bearer ${this.accessToken}`,\n        },\n      }).then(async (r) => {\n        const body = await r.json();\n        if (!r.ok) {\n          const e = new Error(r.status);\n          e.body = body;\n          throw e;\n        }\n        return body;\n      });\n\n    this.fetch.endpoint = 'https://discord.com/api';\n\n    /**\n     * Raw transport userd\n     * @type {RPCTransport}\n     * @private\n     */\n    this.transport = new Transport(this);\n    this.transport.on('message', this._onRpcMessage.bind(this));\n\n    /**\n     * Map of nonces being expected from the transport\n     * @type {Map}\n     * @private\n     */\n    this._expecting = new Map();\n\n    this._connectPromise = undefined;\n  }\n\n  /**\n   * Search and connect to RPC\n   */\n  connect(clientId) {\n    if (this._connectPromise) {\n      return this._connectPromise;\n    }\n    this._connectPromise = new Promise((resolve, reject) => {\n      this.clientId = clientId;\n      const timeout = setTimeout(() => reject(new Error('RPC_CONNECTION_TIMEOUT')), 10e3);\n      timeout.unref();\n      this.once('connected', () => {\n        clearTimeout(timeout);\n        resolve(this);\n      });\n      this.transport.once('close', () => {\n        this._expecting.forEach((e) => {\n          e.reject(new Error('connection closed'));\n        });\n        this.emit('disconnected');\n        reject(new Error('connection closed'));\n      });\n      this.transport.connect().catch(reject);\n    });\n    return this._connectPromise;\n  }\n\n  /**\n   * @typedef {RPCLoginOptions}\n   * @param {string} clientId Client ID\n   * @param {string} [clientSecret] Client secret\n   * @param {string} [accessToken] Access token\n   * @param {string} [rpcToken] RPC token\n   * @param {string} [tokenEndpoint] Token endpoint\n   * @param {string[]} [scopes] Scopes to authorize with\n   */\n\n  /**\n   * Performs authentication flow. Automatically calls Client#connect if needed.\n   * @param {RPCLoginOptions} options Options for authentication.\n   * At least one property must be provided to perform login.\n   * @example client.login({ clientId: '1234567', clientSecret: 'abcdef123' });\n   * @returns {Promise<RPCClient>}\n   */\n  async login(options = {}) {\n    let { clientId, accessToken } = options;\n    await this.connect(clientId);\n    if (!options.scopes) {\n      this.emit('ready');\n      return this;\n    }\n    if (!accessToken) {\n      accessToken = await this.authorize(options);\n    }\n    return this.authenticate(accessToken);\n  }\n\n  /**\n   * Request\n   * @param {string} cmd Command\n   * @param {Object} [args={}] Arguments\n   * @param {string} [evt] Event\n   * @returns {Promise}\n   * @private\n   */\n  request(cmd, args, evt) {\n    return new Promise((resolve, reject) => {\n      const nonce = uuid();\n      this.transport.send({ cmd, args, evt, nonce });\n      this._expecting.set(nonce, { resolve, reject });\n    });\n  }\n\n  /**\n   * Message handler\n   * @param {Object} message message\n   * @private\n   */\n  _onRpcMessage(message) {\n    if (message.cmd === RPCCommands.DISPATCH && message.evt === RPCEvents.READY) {\n      if (message.data.user) {\n        this.user = message.data.user;\n      }\n      this.emit('connected');\n    } else if (this._expecting.has(message.nonce)) {\n      const { resolve, reject } = this._expecting.get(message.nonce);\n      if (message.evt === 'ERROR') {\n        const e = new Error(message.data.message);\n        e.code = message.data.code;\n        e.data = message.data;\n        reject(e);\n      } else {\n        resolve(message.data);\n      }\n      this._expecting.delete(message.nonce);\n    } else {\n      this.emit(message.evt, message.data);\n    }\n  }\n\n  /**\n   * Authorize\n   * @param {Object} options options\n   * @returns {Promise}\n   * @private\n   */\n  async authorize({ scopes, clientSecret, rpcToken, redirectUri, prompt } = {}) {\n    if (clientSecret && rpcToken === true) {\n      const body = await this.fetch('POST', '/oauth2/token/rpc', {\n        data: new URLSearchParams({\n          client_id: this.clientId,\n          client_secret: clientSecret,\n        }),\n      });\n      rpcToken = body.rpc_token;\n    }\n\n    const { code } = await this.request('AUTHORIZE', {\n      scopes,\n      client_id: this.clientId,\n      prompt,\n      rpc_token: rpcToken,\n    });\n\n    const response = await this.fetch('POST', '/oauth2/token', {\n      data: new URLSearchParams({\n        client_id: this.clientId,\n        client_secret: clientSecret,\n        code,\n        grant_type: 'authorization_code',\n        redirect_uri: redirectUri,\n      }),\n    });\n\n    return response.access_token;\n  }\n\n  /**\n   * Authenticate\n   * @param {string} accessToken access token\n   * @returns {Promise}\n   * @private\n   */\n  authenticate(accessToken) {\n    return this.request('AUTHENTICATE', { access_token: accessToken })\n      .then(({ application, user }) => {\n        this.accessToken = accessToken;\n        this.application = application;\n        this.user = user;\n        this.emit('ready');\n        return this;\n      });\n  }\n\n\n  /**\n   * Fetch a guild\n   * @param {Snowflake} id Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Guild>}\n   */\n  getGuild(id, timeout) {\n    return this.request(RPCCommands.GET_GUILD, { guild_id: id, timeout });\n  }\n\n  /**\n   * Fetch all guilds\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Guild>>}\n   */\n  getGuilds(timeout) {\n    return this.request(RPCCommands.GET_GUILDS, { timeout });\n  }\n\n  /**\n   * Get a channel\n   * @param {Snowflake} id Channel ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Channel>}\n   */\n  getChannel(id, timeout) {\n    return this.request(RPCCommands.GET_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get all channels\n   * @param {Snowflake} [id] Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Channel>>}\n   */\n  async getChannels(id, timeout) {\n    const { channels } = await this.request(RPCCommands.GET_CHANNELS, {\n      timeout,\n      guild_id: id,\n    });\n    return channels;\n  }\n\n  /**\n   * @typedef {CertifiedDevice}\n   * @prop {string} type One of `AUDIO_INPUT`, `AUDIO_OUTPUT`, `VIDEO_INPUT`\n   * @prop {string} uuid This device's Windows UUID\n   * @prop {object} vendor Vendor information\n   * @prop {string} vendor.name Vendor's name\n   * @prop {string} vendor.url Vendor's url\n   * @prop {object} model Model information\n   * @prop {string} model.name Model's name\n   * @prop {string} model.url Model's url\n   * @prop {string[]} related Array of related product's Windows UUIDs\n   * @prop {boolean} echoCancellation If the device has echo cancellation\n   * @prop {boolean} noiseSuppression If the device has noise suppression\n   * @prop {boolean} automaticGainControl If the device has automatic gain control\n   * @prop {boolean} hardwareMute If the device has a hardware mute\n   */\n\n  /**\n   * Tell discord which devices are certified\n   * @param {CertifiedDevice[]} devices Certified devices to send to discord\n   * @returns {Promise}\n   */\n  setCertifiedDevices(devices) {\n    return this.request(RPCCommands.SET_CERTIFIED_DEVICES, {\n      devices: devices.map((d) => ({\n        type: d.type,\n        id: d.uuid,\n        vendor: d.vendor,\n        model: d.model,\n        related: d.related,\n        echo_cancellation: d.echoCancellation,\n        noise_suppression: d.noiseSuppression,\n        automatic_gain_control: d.automaticGainControl,\n        hardware_mute: d.hardwareMute,\n      })),\n    });\n  }\n\n  /**\n   * @typedef {UserVoiceSettings}\n   * @prop {Snowflake} id ID of the user these settings apply to\n   * @prop {?Object} [pan] Pan settings, an object with `left` and `right` set between\n   * 0.0 and 1.0, inclusive\n   * @prop {?number} [volume=100] The volume\n   * @prop {bool} [mute] If the user is muted\n   */\n\n  /**\n   * Set the voice settings for a user, by id\n   * @param {Snowflake} id ID of the user to set\n   * @param {UserVoiceSettings} settings Settings\n   * @returns {Promise}\n   */\n  setUserVoiceSettings(id, settings) {\n    return this.request(RPCCommands.SET_USER_VOICE_SETTINGS, {\n      user_id: id,\n      pan: settings.pan,\n      mute: settings.mute,\n      volume: settings.volume,\n    });\n  }\n\n  /**\n   * Move the user to a voice channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * @param {boolean} [options.force] Force this move. This should only be done if you\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectVoiceChannel(id, { timeout, force = false } = {}) {\n    return this.request(RPCCommands.SELECT_VOICE_CHANNEL, { channel_id: id, timeout, force });\n  }\n\n  /**\n   * Move the user to a text channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectTextChannel(id, { timeout } = {}) {\n    return this.request(RPCCommands.SELECT_TEXT_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get current voice settings\n   * @returns {Promise}\n   */\n  getVoiceSettings() {\n    return this.request(RPCCommands.GET_VOICE_SETTINGS)\n      .then((s) => ({\n        automaticGainControl: s.automatic_gain_control,\n        echoCancellation: s.echo_cancellation,\n        noiseSuppression: s.noise_suppression,\n        qos: s.qos,\n        silenceWarning: s.silence_warning,\n        deaf: s.deaf,\n        mute: s.mute,\n        input: {\n          availableDevices: s.input.available_devices,\n          device: s.input.device_id,\n          volume: s.input.volume,\n        },\n        output: {\n          availableDevices: s.output.available_devices,\n          device: s.output.device_id,\n          volume: s.output.volume,\n        },\n        mode: {\n          type: s.mode.type,\n          autoThreshold: s.mode.auto_threshold,\n          threshold: s.mode.threshold,\n          shortcut: s.mode.shortcut,\n          delay: s.mode.delay,\n        },\n      }));\n  }\n\n  /**\n   * Set current voice settings, overriding the current settings until this session disconnects.\n   * This also locks the settings for any other rpc sessions which may be connected.\n   * @param {Object} args Settings\n   * @returns {Promise}\n   */\n  setVoiceSettings(args) {\n    return this.request(RPCCommands.SET_VOICE_SETTINGS, {\n      automatic_gain_control: args.automaticGainControl,\n      echo_cancellation: args.echoCancellation,\n      noise_suppression: args.noiseSuppression,\n      qos: args.qos,\n      silence_warning: args.silenceWarning,\n      deaf: args.deaf,\n      mute: args.mute,\n      input: args.input ? {\n        device_id: args.input.device,\n        volume: args.input.volume,\n      } : undefined,\n      output: args.output ? {\n        device_id: args.output.device,\n        volume: args.output.volume,\n      } : undefined,\n      mode: args.mode ? {\n        type: args.mode.type,\n        auto_threshold: args.mode.autoThreshold,\n        threshold: args.mode.threshold,\n        shortcut: args.mode.shortcut,\n        delay: args.mode.delay,\n      } : undefined,\n    });\n  }\n\n  /**\n   * Capture a shortcut using the client\n   * The callback takes (key, stop) where `stop` is a function that will stop capturing.\n   * This `stop` function must be called before disconnecting or else the user will have\n   * to restart their client.\n   * @param {Function} callback Callback handling keys\n   * @returns {Promise<Function>}\n   */\n  captureShortcut(callback) {\n    const subid = subKey(RPCEvents.CAPTURE_SHORTCUT_CHANGE);\n    const stop = () => {\n      this._subscriptions.delete(subid);\n      return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'STOP' });\n    };\n    this._subscriptions.set(subid, ({ shortcut }) => {\n      callback(shortcut, stop);\n    });\n    return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'START' })\n      .then(() => stop);\n  }\n\n  /**\n   * Sets the presence for the logged in user.\n   * @param {object} args The rich presence to pass.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  setActivity(args = {}, pid = getPid()) {\n    let timestamps;\n    let assets;\n    let party;\n    let secrets;\n    if (args.startTimestamp || args.endTimestamp) {\n      timestamps = {\n        start: args.startTimestamp,\n        end: args.endTimestamp,\n      };\n      if (timestamps.start instanceof Date) {\n        timestamps.start = Math.round(timestamps.start.getTime());\n      }\n      if (timestamps.end instanceof Date) {\n        timestamps.end = Math.round(timestamps.end.getTime());\n      }\n      if (timestamps.start > 2147483647000) {\n        throw new RangeError('timestamps.start must fit into a unix timestamp');\n      }\n      if (timestamps.end > 2147483647000) {\n        throw new RangeError('timestamps.end must fit into a unix timestamp');\n      }\n    }\n    if (\n      args.largeImageKey || args.largeImageText\n      || args.smallImageKey || args.smallImageText\n    ) {\n      assets = {\n        large_image: args.largeImageKey,\n        large_text: args.largeImageText,\n        small_image: args.smallImageKey,\n        small_text: args.smallImageText,\n      };\n    }\n    if (args.partySize || args.partyId || args.partyMax) {\n      party = { id: args.partyId };\n      if (args.partySize || args.partyMax) {\n        party.size = [args.partySize, args.partyMax];\n      }\n    }\n    if (args.matchSecret || args.joinSecret || args.spectateSecret) {\n      secrets = {\n        match: args.matchSecret,\n        join: args.joinSecret,\n        spectate: args.spectateSecret,\n      };\n    }\n\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n      activity: {\n        state: args.state,\n        details: args.details,\n        timestamps,\n        assets,\n        party,\n        secrets,\n        buttons: args.buttons,\n        instance: !!args.instance,\n      },\n    });\n  }\n\n  /**\n   * Clears the currently set presence, if any. This will hide the \"Playing X\" message\n   * displayed below the user's name.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  clearActivity(pid = getPid()) {\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n    });\n  }\n\n  /**\n   * Invite a user to join the game the RPC user is currently playing\n   * @param {User} user The user to invite\n   * @returns {Promise}\n   */\n  sendJoinInvite(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_INVITE, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Request to join the game the user is playing\n   * @param {User} user The user whose game you want to request to join\n   * @returns {Promise}\n   */\n  sendJoinRequest(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Reject a join request from a user\n   * @param {User} user The user whose request you wish to reject\n   * @returns {Promise}\n   */\n  closeJoinRequest(user) {\n    return this.request(RPCCommands.CLOSE_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  createLobby(type, capacity, metadata) {\n    return this.request(RPCCommands.CREATE_LOBBY, {\n      type,\n      capacity,\n      metadata,\n    });\n  }\n\n  updateLobby(lobby, { type, owner, capacity, metadata } = {}) {\n    return this.request(RPCCommands.UPDATE_LOBBY, {\n      id: lobby.id || lobby,\n      type,\n      owner_id: (owner && owner.id) || owner,\n      capacity,\n      metadata,\n    });\n  }\n\n  deleteLobby(lobby) {\n    return this.request(RPCCommands.DELETE_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  connectToLobby(id, secret) {\n    return this.request(RPCCommands.CONNECT_TO_LOBBY, {\n      id,\n      secret,\n    });\n  }\n\n  sendToLobby(lobby, data) {\n    return this.request(RPCCommands.SEND_TO_LOBBY, {\n      id: lobby.id || lobby,\n      data,\n    });\n  }\n\n  disconnectFromLobby(lobby) {\n    return this.request(RPCCommands.DISCONNECT_FROM_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  updateLobbyMember(lobby, user, metadata) {\n    return this.request(RPCCommands.UPDATE_LOBBY_MEMBER, {\n      lobby_id: lobby.id || lobby,\n      user_id: user.id || user,\n      metadata,\n    });\n  }\n\n  getRelationships() {\n    const types = Object.keys(RelationshipTypes);\n    return this.request(RPCCommands.GET_RELATIONSHIPS)\n      .then((o) => o.relationships.map((r) => ({\n        ...r,\n        type: types[r.type],\n      })));\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} event Name of event e.g. `MESSAGE_CREATE`\n   * @param {Object} [args] Args for event e.g. `{ channel_id: '1234' }`\n   * @returns {Promise<Object>}\n   */\n  async subscribe(event, args) {\n    await this.request(RPCCommands.SUBSCRIBE, args, event);\n    return {\n      unsubscribe: () => this.request(RPCCommands.UNSUBSCRIBE, args, event),\n    };\n  }\n\n  /**\n   * Destroy the client\n   */\n  async destroy() {\n    await this.transport.close();\n  }\n}\n\nmodule.exports = RPCClient;\n","'use strict';\n\nfunction keyMirror(arr) {\n  const tmp = {};\n  for (const value of arr) {\n    tmp[value] = value;\n  }\n  return tmp;\n}\n\n\nexports.browser = typeof window !== 'undefined';\n\nexports.RPCCommands = keyMirror([\n  'DISPATCH',\n  'AUTHORIZE',\n  'AUTHENTICATE',\n  'GET_GUILD',\n  'GET_GUILDS',\n  'GET_CHANNEL',\n  'GET_CHANNELS',\n  'CREATE_CHANNEL_INVITE',\n  'GET_RELATIONSHIPS',\n  'GET_USER',\n  'SUBSCRIBE',\n  'UNSUBSCRIBE',\n  'SET_USER_VOICE_SETTINGS',\n  'SET_USER_VOICE_SETTINGS_2',\n  'SELECT_VOICE_CHANNEL',\n  'GET_SELECTED_VOICE_CHANNEL',\n  'SELECT_TEXT_CHANNEL',\n  'GET_VOICE_SETTINGS',\n  'SET_VOICE_SETTINGS_2',\n  'SET_VOICE_SETTINGS',\n  'CAPTURE_SHORTCUT',\n  'SET_ACTIVITY',\n  'SEND_ACTIVITY_JOIN_INVITE',\n  'CLOSE_ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_INVITE_USER',\n  'ACCEPT_ACTIVITY_INVITE',\n  'INVITE_BROWSER',\n  'DEEP_LINK',\n  'CONNECTIONS_CALLBACK',\n  'BRAINTREE_POPUP_BRIDGE_CALLBACK',\n  'GIFT_CODE_BROWSER',\n  'GUILD_TEMPLATE_BROWSER',\n  'OVERLAY',\n  'BROWSER_HANDOFF',\n  'SET_CERTIFIED_DEVICES',\n  'GET_IMAGE',\n  'CREATE_LOBBY',\n  'UPDATE_LOBBY',\n  'DELETE_LOBBY',\n  'UPDATE_LOBBY_MEMBER',\n  'CONNECT_TO_LOBBY',\n  'DISCONNECT_FROM_LOBBY',\n  'SEND_TO_LOBBY',\n  'SEARCH_LOBBIES',\n  'CONNECT_TO_LOBBY_VOICE',\n  'DISCONNECT_FROM_LOBBY_VOICE',\n  'SET_OVERLAY_LOCKED',\n  'OPEN_OVERLAY_ACTIVITY_INVITE',\n  'OPEN_OVERLAY_GUILD_INVITE',\n  'OPEN_OVERLAY_VOICE_SETTINGS',\n  'VALIDATE_APPLICATION',\n  'GET_ENTITLEMENT_TICKET',\n  'GET_APPLICATION_TICKET',\n  'START_PURCHASE',\n  'GET_SKUS',\n  'GET_ENTITLEMENTS',\n  'GET_NETWORKING_CONFIG',\n  'NETWORKING_SYSTEM_METRICS',\n  'NETWORKING_PEER_METRICS',\n  'NETWORKING_CREATE_TOKEN',\n  'SET_USER_ACHIEVEMENT',\n  'GET_USER_ACHIEVEMENTS',\n]);\n\nexports.RPCEvents = keyMirror([\n  'CURRENT_USER_UPDATE',\n  'GUILD_STATUS',\n  'GUILD_CREATE',\n  'CHANNEL_CREATE',\n  'RELATIONSHIP_UPDATE',\n  'VOICE_CHANNEL_SELECT',\n  'VOICE_STATE_CREATE',\n  'VOICE_STATE_DELETE',\n  'VOICE_STATE_UPDATE',\n  'VOICE_SETTINGS_UPDATE',\n  'VOICE_SETTINGS_UPDATE_2',\n  'VOICE_CONNECTION_STATUS',\n  'SPEAKING_START',\n  'SPEAKING_STOP',\n  'GAME_JOIN',\n  'GAME_SPECTATE',\n  'ACTIVITY_JOIN',\n  'ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_SPECTATE',\n  'ACTIVITY_INVITE',\n  'NOTIFICATION_CREATE',\n  'MESSAGE_CREATE',\n  'MESSAGE_UPDATE',\n  'MESSAGE_DELETE',\n  'LOBBY_DELETE',\n  'LOBBY_UPDATE',\n  'LOBBY_MEMBER_CONNECT',\n  'LOBBY_MEMBER_DISCONNECT',\n  'LOBBY_MEMBER_UPDATE',\n  'LOBBY_MESSAGE',\n  'CAPTURE_SHORTCUT_CHANGE',\n  'OVERLAY',\n  'OVERLAY_UPDATE',\n  'ENTITLEMENT_CREATE',\n  'ENTITLEMENT_DELETE',\n  'USER_ACHIEVEMENT_UPDATE',\n  'READY',\n  'ERROR',\n]);\n\nexports.RPCErrors = {\n  CAPTURE_SHORTCUT_ALREADY_LISTENING: 5004,\n  GET_GUILD_TIMED_OUT: 5002,\n  INVALID_ACTIVITY_JOIN_REQUEST: 4012,\n  INVALID_ACTIVITY_SECRET: 5005,\n  INVALID_CHANNEL: 4005,\n  INVALID_CLIENTID: 4007,\n  INVALID_COMMAND: 4002,\n  INVALID_ENTITLEMENT: 4015,\n  INVALID_EVENT: 4004,\n  INVALID_GIFT_CODE: 4016,\n  INVALID_GUILD: 4003,\n  INVALID_INVITE: 4011,\n  INVALID_LOBBY: 4013,\n  INVALID_LOBBY_SECRET: 4014,\n  INVALID_ORIGIN: 4008,\n  INVALID_PAYLOAD: 4000,\n  INVALID_PERMISSIONS: 4006,\n  INVALID_TOKEN: 4009,\n  INVALID_USER: 4010,\n  LOBBY_FULL: 5007,\n  NO_ELIGIBLE_ACTIVITY: 5006,\n  OAUTH2_ERROR: 5000,\n  PURCHASE_CANCELED: 5008,\n  PURCHASE_ERROR: 5009,\n  RATE_LIMITED: 5011,\n  SELECT_CHANNEL_TIMED_OUT: 5001,\n  SELECT_VOICE_FORCE_REQUIRED: 5003,\n  SERVICE_UNAVAILABLE: 1001,\n  TRANSACTION_ABORTED: 1002,\n  UNAUTHORIZED_FOR_ACHIEVEMENT: 5010,\n  UNKNOWN_ERROR: 1000,\n};\n\nexports.RPCCloseCodes = {\n  CLOSE_NORMAL: 1000,\n  CLOSE_UNSUPPORTED: 1003,\n  CLOSE_ABNORMAL: 1006,\n  INVALID_CLIENTID: 4000,\n  INVALID_ORIGIN: 4001,\n  RATELIMITED: 4002,\n  TOKEN_REVOKED: 4003,\n  INVALID_VERSION: 4004,\n  INVALID_ENCODING: 4005,\n};\n\nexports.LobbyTypes = {\n  PRIVATE: 1,\n  PUBLIC: 2,\n};\n\nexports.RelationshipTypes = {\n  NONE: 0,\n  FRIEND: 1,\n  BLOCKED: 2,\n  PENDING_INCOMING: 3,\n  PENDING_OUTGOING: 4,\n  IMPLICIT: 5,\n};\n","'use strict';\n\nconst util = require('./util');\n\nmodule.exports = {\n  Client: require('./client'),\n  register(id) {\n    return util.register(`discord-${id}`);\n  },\n};\n","'use strict';\n\nmodule.exports = {\n  ipc: require('./ipc'),\n  websocket: require('./websocket'),\n};\n","'use strict';\n\nconst net = require('net');\nconst EventEmitter = require('events');\nconst fetch = require('node-fetch');\nconst { uuid } = require('../util');\n\nconst OPCodes = {\n  HANDSHAKE: 0,\n  FRAME: 1,\n  CLOSE: 2,\n  PING: 3,\n  PONG: 4,\n};\n\nfunction getIPCPath(id) {\n  if (process.platform === 'win32') {\n    return `\\\\\\\\?\\\\pipe\\\\discord-ipc-${id}`;\n  }\n  const { env: { XDG_RUNTIME_DIR, TMPDIR, TMP, TEMP } } = process;\n  const prefix = XDG_RUNTIME_DIR || TMPDIR || TMP || TEMP || '/tmp';\n  return `${prefix.replace(/\\/$/, '')}/discord-ipc-${id}`;\n}\n\nfunction getIPC(id = 0) {\n  return new Promise((resolve, reject) => {\n    const path = getIPCPath(id);\n    const onerror = () => {\n      if (id < 10) {\n        resolve(getIPC(id + 1));\n      } else {\n        reject(new Error('Could not connect'));\n      }\n    };\n    const sock = net.createConnection(path, () => {\n      sock.removeListener('error', onerror);\n      resolve(sock);\n    });\n    sock.once('error', onerror);\n  });\n}\n\nasync function findEndpoint(tries = 0) {\n  if (tries > 30) {\n    throw new Error('Could not find endpoint');\n  }\n  const endpoint = `http://127.0.0.1:${6463 + (tries % 10)}`;\n  try {\n    const r = await fetch(endpoint);\n    if (r.status === 404) {\n      return endpoint;\n    }\n    return findEndpoint(tries + 1);\n  } catch (e) {\n    return findEndpoint(tries + 1);\n  }\n}\n\nfunction encode(op, data) {\n  data = JSON.stringify(data);\n  const len = Buffer.byteLength(data);\n  const packet = Buffer.alloc(8 + len);\n  packet.writeInt32LE(op, 0);\n  packet.writeInt32LE(len, 4);\n  packet.write(data, 8, len);\n  return packet;\n}\n\nconst working = {\n  full: '',\n  op: undefined,\n};\n\nfunction decode(socket, callback) {\n  const packet = socket.read();\n  if (!packet) {\n    return;\n  }\n\n  let { op } = working;\n  let raw;\n  if (working.full === '') {\n    op = working.op = packet.readInt32LE(0);\n    const len = packet.readInt32LE(4);\n    raw = packet.slice(8, len + 8);\n  } else {\n    raw = packet.toString();\n  }\n\n  try {\n    const data = JSON.parse(working.full + raw);\n    callback({ op, data }); // eslint-disable-line callback-return\n    working.full = '';\n    working.op = undefined;\n  } catch (err) {\n    working.full += raw;\n  }\n\n  decode(socket, callback);\n}\n\nclass IPCTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.socket = null;\n  }\n\n  async connect() {\n    const socket = this.socket = await getIPC();\n    socket.on('close', this.onClose.bind(this));\n    socket.on('error', this.onClose.bind(this));\n    this.emit('open');\n    socket.write(encode(OPCodes.HANDSHAKE, {\n      v: 1,\n      client_id: this.client.clientId,\n    }));\n    socket.pause();\n    socket.on('readable', () => {\n      decode(socket, ({ op, data }) => {\n        switch (op) {\n          case OPCodes.PING:\n            this.send(data, OPCodes.PONG);\n            break;\n          case OPCodes.FRAME:\n            if (!data) {\n              return;\n            }\n            if (data.cmd === 'AUTHORIZE' && data.evt !== 'ERROR') {\n              findEndpoint()\n                .then((endpoint) => {\n                  this.client.request.endpoint = endpoint;\n                })\n                .catch((e) => {\n                  this.client.emit('error', e);\n                });\n            }\n            this.emit('message', data);\n            break;\n          case OPCodes.CLOSE:\n            this.emit('close', data);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  onClose(e) {\n    this.emit('close', e);\n  }\n\n  send(data, op = OPCodes.FRAME) {\n    this.socket.write(encode(op, data));\n  }\n\n  async close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.send({}, OPCodes.CLOSE);\n      this.socket.end();\n    });\n  }\n\n  ping() {\n    this.send(uuid(), OPCodes.PING);\n  }\n}\n\nmodule.exports = IPCTransport;\nmodule.exports.encode = encode;\nmodule.exports.decode = decode;\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { browser } = require('../constants');\n\n// eslint-disable-next-line\nconst WebSocket = browser ? window.WebSocket : require('ws');\n\nconst pack = (d) => JSON.stringify(d);\nconst unpack = (s) => JSON.parse(s);\n\nclass WebSocketTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.ws = null;\n    this.tries = 0;\n  }\n\n  async connect() {\n    const port = 6463 + (this.tries % 10);\n    this.tries += 1;\n\n    this.ws = new WebSocket(\n      `ws://127.0.0.1:${port}/?v=1&client_id=${this.client.clientId}`,\n      browser ? undefined : { origin: this.client.options.origin },\n    );\n    this.ws.onopen = this.onOpen.bind(this);\n    this.ws.onclose = this.onClose.bind(this);\n    this.ws.onerror = this.onError.bind(this);\n    this.ws.onmessage = this.onMessage.bind(this);\n  }\n\n  onOpen() {\n    this.emit('open');\n  }\n\n  onClose(event) {\n    if (!event.wasClean) {\n      return;\n    }\n    this.emit('close', event);\n  }\n\n  onError(event) {\n    try {\n      this.ws.close();\n    } catch {} // eslint-disable-line no-empty\n\n    if (this.tries > 20) {\n      this.emit('error', event.error);\n    } else {\n      setTimeout(() => {\n        this.connect();\n      }, 250);\n    }\n  }\n\n  onMessage(event) {\n    this.emit('message', unpack(event.data));\n  }\n\n  send(data) {\n    this.ws.send(pack(data));\n  }\n\n  ping() {} // eslint-disable-line no-empty-function\n\n  close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.ws.close();\n    });\n  }\n}\n\nmodule.exports = WebSocketTransport;\n","'use strict';\n\nlet register;\ntry {\n  const { app } = require('electron');\n  register = app.setAsDefaultProtocolClient.bind(app);\n} catch (err) {\n  try {\n    register = require('register-scheme');\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nif (typeof register !== 'function') {\n  register = () => false;\n}\n\nfunction pid() {\n  if (typeof process !== 'undefined') {\n    return process.pid;\n  }\n  return null;\n}\n\nconst uuid4122 = () => {\n  let uuid = '';\n  for (let i = 0; i < 32; i += 1) {\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-';\n    }\n    let n;\n    if (i === 12) {\n      n = 4;\n    } else {\n      const random = Math.random() * 16 | 0;\n      if (i === 16) {\n        n = (random & 3) | 0;\n      } else {\n        n = random;\n      }\n    }\n    uuid += n.toString(16);\n  }\n  return uuid;\n};\n\nmodule.exports = {\n  pid,\n  register,\n  uuid: uuid4122,\n};\n","const fs = require('fs');\nconst path = require('path');\n\nconst pathFile = path.join(__dirname, 'path.txt');\n\nfunction getElectronPath () {\n  let executablePath;\n  if (fs.existsSync(pathFile)) {\n    executablePath = fs.readFileSync(pathFile, 'utf-8');\n  }\n  if (process.env.ELECTRON_OVERRIDE_DIST_PATH) {\n    return path.join(process.env.ELECTRON_OVERRIDE_DIST_PATH, executablePath || 'electron');\n  }\n  if (executablePath) {\n    return path.join(__dirname, 'dist', executablePath);\n  } else {\n    throw new Error('Electron failed to install correctly, please delete node_modules/electron and try installing again');\n  }\n}\n\nmodule.exports = getElectronPath();\n","\n/**\n * Module dependencies.\n */\n\nvar sep = require('path').sep || '/';\n\n/**\n * Module exports.\n */\n\nmodule.exports = fileUriToPath;\n\n/**\n * File URI to Path function.\n *\n * @param {String} uri\n * @return {String} path\n * @api public\n */\n\nfunction fileUriToPath (uri) {\n  if ('string' != typeof uri ||\n      uri.length <= 7 ||\n      'file://' != uri.substring(0, 7)) {\n    throw new TypeError('must pass in a file:// URI to convert to a file path');\n  }\n\n  var rest = decodeURI(uri.substring(7));\n  var firstSlash = rest.indexOf('/');\n  var host = rest.substring(0, firstSlash);\n  var path = rest.substring(firstSlash + 1);\n\n  // 2.  Scheme Definition\n  // As a special case, <host> can be the string \"localhost\" or the empty\n  // string; this is interpreted as \"the machine from which the URL is\n  // being interpreted\".\n  if ('localhost' == host) host = '';\n\n  if (host) {\n    host = sep + sep + host;\n  }\n\n  // 3.2  Drives, drive letters, mount points, file system root\n  // Drive letters are mapped into the top of a file URI in various ways,\n  // depending on the implementation; some applications substitute\n  // vertical bar (\"|\") for the colon after the drive letter, yielding\n  // \"file:///c|/tmp/test.txt\".  In some cases, the colon is left\n  // unchanged, as in \"file:///c:/tmp/test.txt\".  In other cases, the\n  // colon is simply omitted, as in \"file:///c/tmp/test.txt\".\n  path = path.replace(/^(.+)\\|/, '$1:');\n\n  // for Windows, we need to invert the path separators from what a URI uses\n  if (sep == '\\\\') {\n    path = path.replace(/\\//g, '\\\\');\n  }\n\n  if (/^.+\\:/.test(path)) {\n    // has Windows drive at beginning of path\n  } else {\n    // unix path\n    path = sep + path;\n  }\n\n  return host + path;\n}\n","'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","\"use strict\";\n\n// Dependencies\n\nvar parseUrl = require(\"parse-url\"),\n    isSsh = require(\"is-ssh\");\n\n/**\n * gitUp\n * Parses the input url.\n *\n * @name gitUp\n * @function\n * @param {String} input The input url.\n * @return {Object} An object containing the following fields:\n *\n *  - `protocols` (Array): An array with the url protocols (usually it has one element).\n *  - `port` (null|Number): The domain port.\n *  - `resource` (String): The url domain (including subdomains).\n *  - `user` (String): The authentication user (usually for ssh urls).\n *  - `pathname` (String): The url pathname.\n *  - `hash` (String): The url hash.\n *  - `search` (String): The url querystring value.\n *  - `href` (String): The input url.\n *  - `protocol` (String): The git url protocol.\n *  - `token` (String): The oauth token (could appear in the https urls).\n */\nfunction gitUp(input) {\n    var output = parseUrl(input);\n    output.token = \"\";\n\n    var splits = output.user.split(\":\");\n    if (splits.length === 2) {\n        if (splits[1] === \"x-oauth-basic\") {\n            output.token = splits[0];\n        } else if (splits[0] === \"x-token-auth\") {\n            output.token = splits[1];\n        }\n    }\n\n    if (isSsh(output.protocols) || isSsh(input)) {\n        output.protocol = \"ssh\";\n    } else if (output.protocols.length) {\n        output.protocol = output.protocols[0];\n    } else {\n        output.protocol = \"file\";\n    }\n\n    output.href = output.href.replace(/\\/$/, \"\");\n    return output;\n}\n\nmodule.exports = gitUp;","\"use strict\";\n\nvar gitUp = require(\"git-up\");\n\n/**\n * gitUrlParse\n * Parses a Git url.\n *\n * @name gitUrlParse\n * @function\n * @param {String} url The Git url to parse.\n * @return {GitUrl} The `GitUrl` object containing:\n *\n *  - `protocols` (Array): An array with the url protocols (usually it has one element).\n *  - `port` (null|Number): The domain port.\n *  - `resource` (String): The url domain (including subdomains).\n *  - `user` (String): The authentication user (usually for ssh urls).\n *  - `pathname` (String): The url pathname.\n *  - `hash` (String): The url hash.\n *  - `search` (String): The url querystring value.\n *  - `href` (String): The input url.\n *  - `protocol` (String): The git url protocol.\n *  - `token` (String): The oauth token (could appear in the https urls).\n *  - `source` (String): The Git provider (e.g. `\"github.com\"`).\n *  - `owner` (String): The repository owner.\n *  - `name` (String): The repository name.\n *  - `ref` (String): The repository ref (e.g., \"master\" or \"dev\").\n *  - `filepath` (String): A filepath relative to the repository root.\n *  - `filepathtype` (String): The type of filepath in the url (\"blob\" or \"tree\").\n *  - `full_name` (String): The owner and name values in the `owner/name` format.\n *  - `toString` (Function): A function to stringify the parsed url into another url type.\n *  - `organization` (String): The organization the owner belongs to. This is CloudForge specific.\n *  - `git_suffix` (Boolean): Whether to add the `.git` suffix or not.\n *\n */\nfunction gitUrlParse(url) {\n\n    if (typeof url !== \"string\") {\n        throw new Error(\"The url must be a string.\");\n    }\n\n    var urlInfo = gitUp(url),\n        sourceParts = urlInfo.resource.split(\".\"),\n        splits = null;\n\n    urlInfo.toString = function (type) {\n        return gitUrlParse.stringify(this, type);\n    };\n\n    urlInfo.source = sourceParts.length > 2 ? sourceParts.slice(1 - sourceParts.length).join(\".\") : urlInfo.source = urlInfo.resource;\n\n    // Note: Some hosting services (e.g. Visual Studio Team Services) allow whitespace characters\n    // in the repository and owner names so we decode the URL pieces to get the correct result\n    urlInfo.git_suffix = /\\.git$/.test(urlInfo.pathname);\n    urlInfo.name = decodeURIComponent(urlInfo.pathname.replace(/^\\//, '').replace(/\\.git$/, \"\"));\n    urlInfo.owner = decodeURIComponent(urlInfo.user);\n\n    switch (urlInfo.source) {\n        case \"git.cloudforge.com\":\n            urlInfo.owner = urlInfo.user;\n            urlInfo.organization = sourceParts[0];\n            urlInfo.source = \"cloudforge.com\";\n            break;\n        case \"visualstudio.com\":\n            // Handle VSTS SSH URLs\n            if (urlInfo.resource === 'vs-ssh.visualstudio.com') {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 4) {\n                    urlInfo.organization = splits[1];\n                    urlInfo.owner = splits[2];\n                    urlInfo.name = splits[3];\n                    urlInfo.full_name = splits[2] + '/' + splits[3];\n                }\n                break;\n            } else {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 2) {\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[1];\n                    urlInfo.full_name = '_git/' + urlInfo.name;\n                } else if (splits.length === 3) {\n                    urlInfo.name = splits[2];\n                    if (splits[0] === 'DefaultCollection') {\n                        urlInfo.owner = splits[2];\n                        urlInfo.organization = splits[0];\n                        urlInfo.full_name = urlInfo.organization + '/_git/' + urlInfo.name;\n                    } else {\n                        urlInfo.owner = splits[0];\n                        urlInfo.full_name = urlInfo.owner + '/_git/' + urlInfo.name;\n                    }\n                } else if (splits.length === 4) {\n                    urlInfo.organization = splits[0];\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[3];\n                    urlInfo.full_name = urlInfo.organization + '/' + urlInfo.owner + '/_git/' + urlInfo.name;\n                }\n                break;\n            }\n\n        // Azure DevOps (formerly Visual Studio Team Services)\n        case \"dev.azure.com\":\n        case \"azure.com\":\n            if (urlInfo.resource === 'ssh.dev.azure.com') {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 4) {\n                    urlInfo.organization = splits[1];\n                    urlInfo.owner = splits[2];\n                    urlInfo.name = splits[3];\n                }\n                break;\n            } else {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 5) {\n                    urlInfo.organization = splits[0];\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[4];\n                    urlInfo.full_name = '_git/' + urlInfo.name;\n                } else if (splits.length === 3) {\n                    urlInfo.name = splits[2];\n                    if (splits[0] === 'DefaultCollection') {\n                        urlInfo.owner = splits[2];\n                        urlInfo.organization = splits[0];\n                        urlInfo.full_name = urlInfo.organization + '/_git/' + urlInfo.name;\n                    } else {\n                        urlInfo.owner = splits[0];\n                        urlInfo.full_name = urlInfo.owner + '/_git/' + urlInfo.name;\n                    }\n                } else if (splits.length === 4) {\n                    urlInfo.organization = splits[0];\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[3];\n                    urlInfo.full_name = urlInfo.organization + '/' + urlInfo.owner + '/_git/' + urlInfo.name;\n                }\n                if (urlInfo.query && urlInfo.query['path']) {\n                    urlInfo.filepath = urlInfo.query['path'].replace(/^\\/+/g, ''); // Strip leading slash (/)\n                }\n                if (urlInfo.query && urlInfo.query['version']) {\n                    // version=GB<branch>\n                    urlInfo.ref = urlInfo.query['version'].replace(/^GB/, ''); // remove GB\n                }\n                break;\n            }\n        default:\n            splits = urlInfo.name.split(\"/\");\n            var nameIndex = splits.length - 1;\n            if (splits.length >= 2) {\n                var dashIndex = splits.indexOf(\"-\", 2);\n                var blobIndex = splits.indexOf(\"blob\", 2);\n                var treeIndex = splits.indexOf(\"tree\", 2);\n                var commitIndex = splits.indexOf(\"commit\", 2);\n                var srcIndex = splits.indexOf(\"src\", 2);\n                var rawIndex = splits.indexOf(\"raw\", 2);\n                nameIndex = dashIndex > 0 ? dashIndex - 1 : blobIndex > 0 ? blobIndex - 1 : treeIndex > 0 ? treeIndex - 1 : commitIndex > 0 ? commitIndex - 1 : srcIndex > 0 ? srcIndex - 1 : rawIndex > 0 ? rawIndex - 1 : nameIndex;\n\n                urlInfo.owner = splits.slice(0, nameIndex).join('/');\n                urlInfo.name = splits[nameIndex];\n                if (commitIndex) {\n                    urlInfo.commit = splits[nameIndex + 2];\n                }\n            }\n\n            urlInfo.ref = \"\";\n            urlInfo.filepathtype = \"\";\n            urlInfo.filepath = \"\";\n            var offsetNameIndex = splits.length > nameIndex && splits[nameIndex + 1] === \"-\" ? nameIndex + 1 : nameIndex;\n            if (splits.length > offsetNameIndex + 2 && [\"raw\", \"src\", \"blob\", \"tree\"].indexOf(splits[offsetNameIndex + 1]) >= 0) {\n                urlInfo.filepathtype = splits[offsetNameIndex + 1];\n                urlInfo.ref = splits[offsetNameIndex + 2];\n                if (splits.length > offsetNameIndex + 3) {\n                    urlInfo.filepath = splits.slice(offsetNameIndex + 3).join('/');\n                }\n            }\n            urlInfo.organization = urlInfo.owner;\n            break;\n    }\n\n    if (!urlInfo.full_name) {\n        urlInfo.full_name = urlInfo.owner;\n        if (urlInfo.name) {\n            urlInfo.full_name && (urlInfo.full_name += \"/\");\n            urlInfo.full_name += urlInfo.name;\n        }\n    }\n    // Bitbucket Server\n    if (urlInfo.owner.startsWith(\"scm/\")) {\n        urlInfo.source = \"bitbucket-server\";\n        urlInfo.owner = urlInfo.owner.replace(\"scm/\", \"\");\n        urlInfo.organization = urlInfo.owner;\n        urlInfo.full_name = urlInfo.owner + \"/\" + urlInfo.name;\n    }\n\n    var bitbucket = /(projects|users)\\/(.*?)\\/repos\\/(.*?)((\\/.*$)|$)/;\n    var matches = bitbucket.exec(urlInfo.pathname);\n    if (matches != null) {\n        urlInfo.source = \"bitbucket-server\";\n        if (matches[1] === \"users\") {\n            urlInfo.owner = \"~\" + matches[2];\n        } else {\n            urlInfo.owner = matches[2];\n        }\n\n        urlInfo.organization = urlInfo.owner;\n        urlInfo.name = matches[3];\n\n        splits = matches[4].split(\"/\");\n        if (splits.length > 1) {\n            if ([\"raw\", \"browse\"].indexOf(splits[1]) >= 0) {\n                urlInfo.filepathtype = splits[1];\n                if (splits.length > 2) {\n                    urlInfo.filepath = splits.slice(2).join('/');\n                }\n            } else if (splits[1] === \"commits\" && splits.length > 2) {\n                urlInfo.commit = splits[2];\n            }\n        }\n        urlInfo.full_name = urlInfo.owner + \"/\" + urlInfo.name;\n\n        if (urlInfo.query.at) {\n            urlInfo.ref = urlInfo.query.at;\n        } else {\n            urlInfo.ref = \"\";\n        }\n    }\n    return urlInfo;\n}\n\n/**\n * stringify\n * Stringifies a `GitUrl` object.\n *\n * @name stringify\n * @function\n * @param {GitUrl} obj The parsed Git url object.\n * @param {String} type The type of the stringified url (default `obj.protocol`).\n * @return {String} The stringified url.\n */\ngitUrlParse.stringify = function (obj, type) {\n    type = type || (obj.protocols && obj.protocols.length ? obj.protocols.join('+') : obj.protocol);\n    var port = obj.port ? \":\" + obj.port : '';\n    var user = obj.user || 'git';\n    var maybeGitSuffix = obj.git_suffix ? \".git\" : \"\";\n    switch (type) {\n        case \"ssh\":\n            if (port) return \"ssh://\" + user + \"@\" + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;else return user + \"@\" + obj.resource + \":\" + obj.full_name + maybeGitSuffix;\n        case \"git+ssh\":\n        case \"ssh+git\":\n        case \"ftp\":\n        case \"ftps\":\n            return type + \"://\" + user + \"@\" + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;\n        case \"http\":\n        case \"https\":\n            var auth = obj.token ? buildToken(obj) : obj.user && (obj.protocols.includes('http') || obj.protocols.includes('https')) ? obj.user + \"@\" : \"\";\n            return type + \"://\" + auth + obj.resource + port + \"/\" + buildPath(obj) + maybeGitSuffix;\n        default:\n            return obj.href;\n    }\n};\n\n/*!\n * buildToken\n * Builds OAuth token prefix (helper function)\n *\n * @name buildToken\n * @function\n * @param {GitUrl} obj The parsed Git url object.\n * @return {String} token prefix\n */\nfunction buildToken(obj) {\n    switch (obj.source) {\n        case \"bitbucket.org\":\n            return \"x-token-auth:\" + obj.token + \"@\";\n        default:\n            return obj.token + \"@\";\n    }\n}\n\nfunction buildPath(obj) {\n    switch (obj.source) {\n        case \"bitbucket-server\":\n            return \"scm/\" + obj.full_name;\n        default:\n            return \"\" + obj.full_name;\n\n    }\n}\n\nmodule.exports = gitUrlParse;","\"use strict\";\n\n// Dependencies\nvar protocols = require(\"protocols\");\n\n/**\n * isSsh\n * Checks if an input value is a ssh url or not.\n *\n * @name isSsh\n * @function\n * @param {String|Array} input The input url or an array of protocols.\n * @return {Boolean} `true` if the input is a ssh url, `false` otherwise.\n */\nfunction isSsh(input) {\n\n    if (Array.isArray(input)) {\n        return input.indexOf(\"ssh\") !== -1 || input.indexOf(\"rsync\") !== -1;\n    }\n\n    if (typeof input !== \"string\") {\n        return false;\n    }\n\n    var prots = protocols(input);\n    input = input.substring(input.indexOf(\"://\") + 3);\n    if (isSsh(prots)) {\n        return true;\n    }\n\n    // TODO This probably could be improved :)\n    var urlPortPattern = new RegExp('\\.([a-zA-Z\\\\d]+):(\\\\d+)\\/');\n    return !input.match(urlPortPattern) && input.indexOf(\"@\") < input.indexOf(\":\");\n}\n\nmodule.exports = isSsh;","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","'use strict';\n\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\nconst DATA_URL_DEFAULT_MIME_TYPE = 'text/plain';\nconst DATA_URL_DEFAULT_CHARSET = 'us-ascii';\n\nconst testParameter = (name, filters) => {\n\treturn filters.some(filter => filter instanceof RegExp ? filter.test(name) : filter === name);\n};\n\nconst normalizeDataURL = (urlString, {stripHash}) => {\n\tconst match = /^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(urlString);\n\n\tif (!match) {\n\t\tthrow new Error(`Invalid URL: ${urlString}`);\n\t}\n\n\tlet {type, data, hash} = match.groups;\n\tconst mediaType = type.split(';');\n\thash = stripHash ? '' : hash;\n\n\tlet isBase64 = false;\n\tif (mediaType[mediaType.length - 1] === 'base64') {\n\t\tmediaType.pop();\n\t\tisBase64 = true;\n\t}\n\n\t// Lowercase MIME type\n\tconst mimeType = (mediaType.shift() || '').toLowerCase();\n\tconst attributes = mediaType\n\t\t.map(attribute => {\n\t\t\tlet [key, value = ''] = attribute.split('=').map(string => string.trim());\n\n\t\t\t// Lowercase `charset`\n\t\t\tif (key === 'charset') {\n\t\t\t\tvalue = value.toLowerCase();\n\n\t\t\t\tif (value === DATA_URL_DEFAULT_CHARSET) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn `${key}${value ? `=${value}` : ''}`;\n\t\t})\n\t\t.filter(Boolean);\n\n\tconst normalizedMediaType = [\n\t\t...attributes\n\t];\n\n\tif (isBase64) {\n\t\tnormalizedMediaType.push('base64');\n\t}\n\n\tif (normalizedMediaType.length !== 0 || (mimeType && mimeType !== DATA_URL_DEFAULT_MIME_TYPE)) {\n\t\tnormalizedMediaType.unshift(mimeType);\n\t}\n\n\treturn `data:${normalizedMediaType.join(';')},${isBase64 ? data.trim() : data}${hash ? `#${hash}` : ''}`;\n};\n\nconst normalizeUrl = (urlString, options) => {\n\toptions = {\n\t\tdefaultProtocol: 'http:',\n\t\tnormalizeProtocol: true,\n\t\tforceHttp: false,\n\t\tforceHttps: false,\n\t\tstripAuthentication: true,\n\t\tstripHash: false,\n\t\tstripTextFragment: true,\n\t\tstripWWW: true,\n\t\tremoveQueryParameters: [/^utm_\\w+/i],\n\t\tremoveTrailingSlash: true,\n\t\tremoveSingleSlash: true,\n\t\tremoveDirectoryIndex: false,\n\t\tsortQueryParameters: true,\n\t\t...options\n\t};\n\n\turlString = urlString.trim();\n\n\t// Data URL\n\tif (/^data:/i.test(urlString)) {\n\t\treturn normalizeDataURL(urlString, options);\n\t}\n\n\tif (/^view-source:/i.test(urlString)) {\n\t\tthrow new Error('`view-source:` is not supported as it is a non-standard protocol');\n\t}\n\n\tconst hasRelativeProtocol = urlString.startsWith('//');\n\tconst isRelativeUrl = !hasRelativeProtocol && /^\\.*\\//.test(urlString);\n\n\t// Prepend protocol\n\tif (!isRelativeUrl) {\n\t\turlString = urlString.replace(/^(?!(?:\\w+:)?\\/\\/)|^\\/\\//, options.defaultProtocol);\n\t}\n\n\tconst urlObj = new URL(urlString);\n\n\tif (options.forceHttp && options.forceHttps) {\n\t\tthrow new Error('The `forceHttp` and `forceHttps` options cannot be used together');\n\t}\n\n\tif (options.forceHttp && urlObj.protocol === 'https:') {\n\t\turlObj.protocol = 'http:';\n\t}\n\n\tif (options.forceHttps && urlObj.protocol === 'http:') {\n\t\turlObj.protocol = 'https:';\n\t}\n\n\t// Remove auth\n\tif (options.stripAuthentication) {\n\t\turlObj.username = '';\n\t\turlObj.password = '';\n\t}\n\n\t// Remove hash\n\tif (options.stripHash) {\n\t\turlObj.hash = '';\n\t} else if (options.stripTextFragment) {\n\t\turlObj.hash = urlObj.hash.replace(/#?:~:text.*?$/i, '');\n\t}\n\n\t// Remove duplicate slashes if not preceded by a protocol\n\tif (urlObj.pathname) {\n\t\turlObj.pathname = urlObj.pathname.replace(/(?<!\\b(?:[a-z][a-z\\d+\\-.]{1,50}:))\\/{2,}/g, '/');\n\t}\n\n\t// Decode URI octets\n\tif (urlObj.pathname) {\n\t\ttry {\n\t\t\turlObj.pathname = decodeURI(urlObj.pathname);\n\t\t} catch (_) {}\n\t}\n\n\t// Remove directory index\n\tif (options.removeDirectoryIndex === true) {\n\t\toptions.removeDirectoryIndex = [/^index\\.[a-z]+$/];\n\t}\n\n\tif (Array.isArray(options.removeDirectoryIndex) && options.removeDirectoryIndex.length > 0) {\n\t\tlet pathComponents = urlObj.pathname.split('/');\n\t\tconst lastComponent = pathComponents[pathComponents.length - 1];\n\n\t\tif (testParameter(lastComponent, options.removeDirectoryIndex)) {\n\t\t\tpathComponents = pathComponents.slice(0, pathComponents.length - 1);\n\t\t\turlObj.pathname = pathComponents.slice(1).join('/') + '/';\n\t\t}\n\t}\n\n\tif (urlObj.hostname) {\n\t\t// Remove trailing dot\n\t\turlObj.hostname = urlObj.hostname.replace(/\\.$/, '');\n\n\t\t// Remove `www.`\n\t\tif (options.stripWWW && /^www\\.(?!www\\.)(?:[a-z\\-\\d]{1,63})\\.(?:[a-z.\\-\\d]{2,63})$/.test(urlObj.hostname)) {\n\t\t\t// Each label should be max 63 at length (min: 1).\n\t\t\t// Source: https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names\n\t\t\t// Each TLD should be up to 63 characters long (min: 2).\n\t\t\t// It is technically possible to have a single character TLD, but none currently exist.\n\t\t\turlObj.hostname = urlObj.hostname.replace(/^www\\./, '');\n\t\t}\n\t}\n\n\t// Remove query unwanted parameters\n\tif (Array.isArray(options.removeQueryParameters)) {\n\t\tfor (const key of [...urlObj.searchParams.keys()]) {\n\t\t\tif (testParameter(key, options.removeQueryParameters)) {\n\t\t\t\turlObj.searchParams.delete(key);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (options.removeQueryParameters === true) {\n\t\turlObj.search = '';\n\t}\n\n\t// Sort query parameters\n\tif (options.sortQueryParameters) {\n\t\turlObj.searchParams.sort();\n\t}\n\n\tif (options.removeTrailingSlash) {\n\t\turlObj.pathname = urlObj.pathname.replace(/\\/$/, '');\n\t}\n\n\tconst oldUrlString = urlString;\n\n\t// Take advantage of many of the Node `url` normalizations\n\turlString = urlObj.toString();\n\n\tif (!options.removeSingleSlash && urlObj.pathname === '/' && !oldUrlString.endsWith('/') && urlObj.hash === '') {\n\t\turlString = urlString.replace(/\\/$/, '');\n\t}\n\n\t// Remove ending `/` unless removeSingleSlash is false\n\tif ((options.removeTrailingSlash || urlObj.pathname === '/') && urlObj.hash === '' && options.removeSingleSlash) {\n\t\turlString = urlString.replace(/\\/$/, '');\n\t}\n\n\t// Restore relative protocol, if applicable\n\tif (hasRelativeProtocol && !options.normalizeProtocol) {\n\t\turlString = urlString.replace(/^http:\\/\\//, '//');\n\t}\n\n\t// Remove http/https\n\tif (options.stripProtocol) {\n\t\turlString = urlString.replace(/^(?:https?:)?\\/\\//, '');\n\t}\n\n\treturn urlString;\n};\n\nmodule.exports = normalizeUrl;\n","\"use strict\";\n\n// Dependencies\nvar protocols = require(\"protocols\"),\n    isSsh = require(\"is-ssh\"),\n    qs = require(\"query-string\");\n\n/**\n * parsePath\n * Parses the input url.\n *\n * @name parsePath\n * @function\n * @param {String} url The input url.\n * @return {Object} An object containing the following fields:\n *\n *  - `protocols` (Array): An array with the url protocols (usually it has one element).\n *  - `protocol` (String): The first protocol, `\"ssh\"` (if the url is a ssh url) or `\"file\"`.\n *  - `port` (null|Number): The domain port.\n *  - `resource` (String): The url domain (including subdomains).\n *  - `user` (String): The authentication user (usually for ssh urls).\n *  - `pathname` (String): The url pathname.\n *  - `hash` (String): The url hash.\n *  - `search` (String): The url querystring value.\n *  - `href` (String): The input url.\n *  - `query` (Object): The url querystring, parsed as object.\n */\nfunction parsePath(url) {\n    url = (url || \"\").trim();\n    var output = {\n        protocols: protocols(url),\n        protocol: null,\n        port: null,\n        resource: \"\",\n        user: \"\",\n        pathname: \"\",\n        hash: \"\",\n        search: \"\",\n        href: url,\n        query: Object.create(null)\n    },\n        protocolIndex = url.indexOf(\"://\"),\n        resourceIndex = -1,\n        splits = null,\n        parts = null;\n\n    if (url.startsWith(\".\")) {\n        if (url.startsWith(\"./\")) {\n            url = url.substring(2);\n        }\n        output.pathname = url;\n        output.protocol = \"file\";\n    }\n\n    var firstChar = url.charAt(1);\n    if (!output.protocol) {\n        output.protocol = output.protocols[0];\n        if (!output.protocol) {\n            if (isSsh(url)) {\n                output.protocol = \"ssh\";\n            } else if (firstChar === \"/\" || firstChar === \"~\") {\n                url = url.substring(2);\n                output.protocol = \"file\";\n            } else {\n                output.protocol = \"file\";\n            }\n        }\n    }\n\n    if (protocolIndex !== -1) {\n        url = url.substring(protocolIndex + 3);\n    }\n\n    parts = url.split(/\\/|\\\\/);\n    if (output.protocol !== \"file\") {\n        output.resource = parts.shift();\n    } else {\n        output.resource = \"\";\n    }\n\n    // user@domain\n    splits = output.resource.split(\"@\");\n    if (splits.length === 2) {\n        output.user = splits[0];\n        output.resource = splits[1];\n    }\n\n    // domain.com:port\n    splits = output.resource.split(\":\");\n    if (splits.length === 2) {\n        output.resource = splits[0];\n        if (splits[1]) {\n            output.port = Number(splits[1]);\n            if (isNaN(output.port)) {\n                output.port = null;\n                parts.unshift(splits[1]);\n            }\n        } else {\n            output.port = null;\n        }\n    }\n\n    // Remove empty elements\n    parts = parts.filter(Boolean);\n\n    // Stringify the pathname\n    if (output.protocol === \"file\") {\n        output.pathname = output.href;\n    } else {\n        output.pathname = output.pathname || (output.protocol !== \"file\" || output.href[0] === \"/\" ? \"/\" : \"\") + parts.join(\"/\");\n    }\n\n    // #some-hash\n    splits = output.pathname.split(\"#\");\n    if (splits.length === 2) {\n        output.pathname = splits[0];\n        output.hash = splits[1];\n    }\n\n    // ?foo=bar\n    splits = output.pathname.split(\"?\");\n    if (splits.length === 2) {\n        output.pathname = splits[0];\n        output.search = splits[1];\n    }\n\n    output.query = qs.parse(output.search);\n    output.href = output.href.replace(/\\/$/, \"\");\n    output.pathname = output.pathname.replace(/\\/$/, \"\");\n    return output;\n}\n\nmodule.exports = parsePath;","\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar parsePath = require(\"parse-path\"),\n    normalizeUrl = require(\"normalize-url\");\n\n/**\n * parseUrl\n * Parses the input url.\n *\n * **Note**: This *throws* if invalid urls are provided.\n *\n * @name parseUrl\n * @function\n * @param {String} url The input url.\n * @param {Boolean|Object} normalize Wheter to normalize the url or not.\n *                         Default is `false`. If `true`, the url will\n *                         be normalized. If an object, it will be the\n *                         options object sent to [`normalize-url`](https://github.com/sindresorhus/normalize-url).\n *\n *                         For SSH urls, normalize won't work.\n *\n * @return {Object} An object containing the following fields:\n *\n *  - `protocols` (Array): An array with the url protocols (usually it has one element).\n *  - `protocol` (String): The first protocol, `\"ssh\"` (if the url is a ssh url) or `\"file\"`.\n *  - `port` (null|Number): The domain port.\n *  - `resource` (String): The url domain (including subdomains).\n *  - `user` (String): The authentication user (usually for ssh urls).\n *  - `pathname` (String): The url pathname.\n *  - `hash` (String): The url hash.\n *  - `search` (String): The url querystring value.\n *  - `href` (String): The input url.\n *  - `query` (Object): The url querystring, parsed as object.\n */\nfunction parseUrl(url) {\n    var normalize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (typeof url !== \"string\" || !url.trim()) {\n        throw new Error(\"Invalid url.\");\n    }\n    if (normalize) {\n        if ((typeof normalize === \"undefined\" ? \"undefined\" : _typeof(normalize)) !== \"object\") {\n            normalize = {\n                stripHash: false\n            };\n        }\n        url = normalizeUrl(url, normalize);\n    }\n    var parsed = parsePath(url);\n    return parsed;\n}\n\nmodule.exports = parseUrl;","\"use strict\";\n\n/**\n * protocols\n * Returns the protocols of an input url.\n *\n * @name protocols\n * @function\n * @param {String} input The input url.\n * @param {Boolean|Number} first If `true`, the first protocol will be returned. If number, it will represent the zero-based index of the protocols array.\n * @return {Array|String} The array of protocols or the specified protocol.\n */\nmodule.exports = function protocols(input, first) {\n\n    if (first === true) {\n        first = 0;\n    }\n\n    var index = input.indexOf(\"://\"),\n        splits = input.substring(0, index).split(\"+\").filter(Boolean);\n\n    if (typeof first === \"number\") {\n        return splits[first];\n    }\n\n    return splits;\n};","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${encode(object.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n","module.exports = require('bindings')('register-protocol-handler').registerProtocolHandler;\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"vscode\");","import { window } from 'vscode';\nconst outputChannel = window.createOutputChannel('RPC');\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[\"Info\"] = \"INFO\";\n    LogLevel[\"Warn\"] = \"WARN\";\n    LogLevel[\"Error\"] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nconst logMessage = (message, logLevel) => {\n    const timestamp = new Date().toLocaleTimeString();\n    if (typeof message === 'string') {\n        outputChannel.appendLine(`[${timestamp} - ${logLevel}] ${message}`);\n    }\n    else if (message instanceof Error) {\n        outputChannel.appendLine(`[${timestamp} - ${logLevel}] ${message.message}`);\n        if (message.stack) {\n            outputChannel.appendLine(`[${timestamp} - ${logLevel}] ${message.stack}`);\n        }\n    }\n    else if (typeof message === 'object') {\n        try {\n            const json = JSON.stringify(message, null, 2);\n            outputChannel.appendLine(`[${timestamp} - ${logLevel}] ${json}`);\n        }\n        catch { }\n    }\n};\nexport const logInfo = (message) => {\n    logMessage(message, \"INFO\" /* Info */);\n};\nexport const logWarn = (message) => {\n    logMessage(message, \"WARN\" /* Warn */);\n};\nexport const logError = (message) => {\n    logMessage(message, \"ERROR\" /* Error */);\n};\n","export const throttle = (fn, delay) => {\n    let lastCalled = 0;\n    return (...args) => {\n        const now = new Date().getTime();\n        if (now - lastCalled < delay) {\n            return;\n        }\n        lastCalled = now;\n        return fn(...args);\n    };\n};\n","import { workspace } from 'vscode';\nexport function getConfig() {\n    return workspace.getConfiguration('rpc');\n}\n","import lang from './data/languages.json';\nexport const { KNOWN_EXTENSIONS, KNOWN_LANGUAGES } = lang;\nexport const EMPTY = '';\nexport const FAKE_EMPTY = '\\u200b\\u200b';\nexport const IDLE_SMALL_IMAGE_KEY = 'idle';\nexport const IDLE_VSCODE_IMAGE_KEY = 'idle-vscode';\nexport const IDLE_VSCODE_INSIDERS_IMAGE_KEY = 'idle-vscode-insiders';\nexport const DEBUGGING_IMAGE_KEY = 'debugging';\nexport const VSCODE_IMAGE_KEY = 'vscode';\nexport const VSCODE_INSIDERS_IMAGE_KEY = 'vscode-insiders';\nexport var CONFIG_KEYS;\n(function (CONFIG_KEYS) {\n    CONFIG_KEYS[\"Id\"] = \"id\";\n    CONFIG_KEYS[\"Enabled\"] = \"enabled\";\n    CONFIG_KEYS[\"DetailsIdling\"] = \"detailsIdling\";\n    CONFIG_KEYS[\"DetailsViewing\"] = \"detailsViewing\";\n    CONFIG_KEYS[\"DetailsEditing\"] = \"detailsEditing\";\n    CONFIG_KEYS[\"DetailsDebugging\"] = \"detailsDebugging\";\n    CONFIG_KEYS[\"LowerDetailsIdling\"] = \"lowerDetailsIdling\";\n    CONFIG_KEYS[\"LowerDetailsViewing\"] = \"lowerDetailsViewing\";\n    CONFIG_KEYS[\"LowerDetailsEditing\"] = \"lowerDetailsEditing\";\n    CONFIG_KEYS[\"LowerDetailsDebugging\"] = \"lowerDetailsDebugging\";\n    CONFIG_KEYS[\"LowerDetailsNoWorkspaceFound\"] = \"lowerDetailsNoWorkspaceFound\";\n    CONFIG_KEYS[\"LargeImageIdling\"] = \"largeImageIdling\";\n    CONFIG_KEYS[\"LargeImage\"] = \"largeImage\";\n    CONFIG_KEYS[\"SmallImage\"] = \"smallImage\";\n    CONFIG_KEYS[\"RemoveElapsedTime\"] = \"removeElapsedTime\";\n    CONFIG_KEYS[\"RemoveDetails\"] = \"removeDetails\";\n    CONFIG_KEYS[\"RemoveLowerDetails\"] = \"removeLowerDetails\";\n    CONFIG_KEYS[\"RemoveLowerDetailsIdling\"] = \"removeLowerDetailsIdling\";\n    CONFIG_KEYS[\"IgnoreWorkspaces\"] = \"ignoreWorkspaces\";\n    CONFIG_KEYS[\"IgnoreWorkspacesText\"] = \"ignoreWorkspacesText\";\n    CONFIG_KEYS[\"IdleTimeout\"] = \"idleTimeout\";\n    CONFIG_KEYS[\"CheckIdle\"] = \"checkIdle\";\n    CONFIG_KEYS[\"IdleText\"] = \"idleText\";\n    CONFIG_KEYS[\"AppName\"] = \"appName\";\n    CONFIG_KEYS[\"ShowProblems\"] = \"showProblems\";\n    CONFIG_KEYS[\"ProblemsText\"] = \"problemsText\";\n    CONFIG_KEYS[\"ButtonEnabled\"] = \"buttonEnabled\";\n    CONFIG_KEYS[\"ButtonActiveLabel\"] = \"buttonActiveLabel\";\n    CONFIG_KEYS[\"ButtonInactiveLabel\"] = \"buttonInactiveLabel\";\n    CONFIG_KEYS[\"ButtonInactiveUrl\"] = \"buttonInactiveUrl\";\n    CONFIG_KEYS[\"IgnoreRepositories\"] = \"ignoreRepositories\";\n    CONFIG_KEYS[\"IgnoreOrganizations\"] = \"ignoreOrganizations\";\n    CONFIG_KEYS[\"SuppressNotifications\"] = \"suppressNotifications\";\n    CONFIG_KEYS[\"PrioritizeLanguagesOverExtensions\"] = \"prioritizeLanguagesOverExtensions\";\n})(CONFIG_KEYS || (CONFIG_KEYS = {}));\nexport var REPLACE_KEYS;\n(function (REPLACE_KEYS) {\n    REPLACE_KEYS[\"Empty\"] = \"{empty}\";\n    REPLACE_KEYS[\"FileName\"] = \"{file_name}\";\n    REPLACE_KEYS[\"DirName\"] = \"{dir_name}\";\n    REPLACE_KEYS[\"FullDirName\"] = \"{full_dir_name}\";\n    REPLACE_KEYS[\"Workspace\"] = \"{workspace}\";\n    REPLACE_KEYS[\"VSCodeWorkspace\"] = \"(Workspace)\";\n    REPLACE_KEYS[\"WorkspaceFolder\"] = \"{workspace_folder}\";\n    REPLACE_KEYS[\"WorkspaceAndFolder\"] = \"{workspace_and_folder}\";\n    REPLACE_KEYS[\"LanguageLowerCase\"] = \"{lang}\";\n    REPLACE_KEYS[\"LanguageTitleCase\"] = \"{Lang}\";\n    REPLACE_KEYS[\"LanguageUpperCase\"] = \"{LANG}\";\n    REPLACE_KEYS[\"TotalLines\"] = \"{total_lines}\";\n    REPLACE_KEYS[\"CurrentLine\"] = \"{current_line}\";\n    REPLACE_KEYS[\"CurrentColumn\"] = \"{current_column}\";\n    REPLACE_KEYS[\"AppName\"] = \"{app_name}\";\n    REPLACE_KEYS[\"Problems\"] = \"{problems}\";\n    REPLACE_KEYS[\"ProblemsCount\"] = \"{problemsCount}\";\n    REPLACE_KEYS[\"GitRepo\"] = \"{git_repo}\";\n    REPLACE_KEYS[\"GitBranch\"] = \"{git_branch}\";\n})(REPLACE_KEYS || (REPLACE_KEYS = {}));\n","import gitUrlParse from 'git-url-parse';\nimport { parse, sep } from 'path';\nimport { EventEmitter, extensions, window, workspace } from 'vscode';\nimport { logInfo } from './logger';\nconst API_VERSION = 1;\nexport class Data {\n    _file;\n    _repo;\n    _remote;\n    _debug;\n    eventEmitter = new EventEmitter();\n    rootListeners = [];\n    gitExtListeners = [];\n    gitApiListeners = [];\n    gitExt;\n    gitApi;\n    constructor(debugLevel = 0) {\n        this._debug = debugLevel;\n        this._file = window.activeTextEditor\n            ? parse(window.activeTextEditor.document.fileName)\n            : undefined;\n        this.ext();\n        this.api(this.gitExt?.exports.enabled || false);\n        this.rootListeners.push(window.onDidChangeActiveTextEditor((e) => {\n            this.debug(2, `root(): window.onDidChangeActiveTextEditor`);\n            this._file = e ? parse(e.document.fileName) : undefined;\n            this.updateGit();\n        }), workspace.onDidChangeWorkspaceFolders(() => {\n            this.debug(2, `root(): workspace.onDidChangeWorkspaceFolders`);\n            this.updateGit();\n        }), extensions.onDidChange(() => {\n            this.debug(2, `root(): extensions.onDidChange`);\n            this.ext();\n        }));\n    }\n    get fileName() {\n        const v = this._file ? this._file.name + this._file.ext : undefined;\n        this.debug(4, `fileName(): ${v}`);\n        return v;\n    }\n    get dirName() {\n        const v = this._file?.dir.split(sep).pop();\n        this.debug(4, `dirName(): ${v}`);\n        return v;\n    }\n    get fullDirName() {\n        const v = this._file?.dir;\n        this.debug(4, `fullDirName(): ${v}`);\n        return v;\n    }\n    get workspace() {\n        const v = workspace.name;\n        this.debug(4, `workspace(): ${v}`);\n        return v;\n    }\n    get workspaceFolder() {\n        const uri = window?.activeTextEditor?.document.uri;\n        let v = undefined;\n        if (uri) {\n            v = workspace.getWorkspaceFolder(uri);\n        }\n        this.debug(4, `workspaceFolder(): ${uri ? 'Found URI' : 'No URI'} ${v}`);\n        return v;\n    }\n    get gitRepoPath() {\n        const v = this._repo?.rootUri.fsPath;\n        this.debug(4, `gitRepoPath(): ${v}`);\n        return v;\n    }\n    get gitRepoName() {\n        const v = this._repo?.rootUri.fsPath.split(sep).pop();\n        this.debug(4, `gitRepoName(): ${v}`);\n        return v;\n    }\n    get gitRemoteName() {\n        const v = this.gitRemoteUrl?.name;\n        this.debug(4, `gitRepoName(): ${v}`);\n        return v;\n    }\n    get gitRemoteUrl() {\n        const v = this._remote?.fetchUrl ?? this._remote?.pushUrl;\n        this.debug(4, `gitRemoteUrl(): Url: ${v}`);\n        if (!v) {\n            return;\n        }\n        return gitUrlParse(v);\n    }\n    get gitBranchName() {\n        const v = this._repo?.state.HEAD?.name;\n        this.debug(4, `gitBranchName(): ${v}`);\n        return v;\n    }\n    dispose(level = 0) {\n        let disposeOf = [];\n        switch (level) {\n            case 0:\n                this.dispose(1);\n                disposeOf = this.rootListeners;\n                this.rootListeners = [];\n                break;\n            case 1:\n                this.dispose(2);\n                disposeOf = this.gitExtListeners;\n                this.gitExtListeners = [];\n                break;\n            case 2:\n                disposeOf = this.gitApiListeners;\n                this.gitApiListeners = [];\n                break;\n        }\n        for (const disposable of disposeOf) {\n            disposable?.dispose();\n        }\n    }\n    onUpdate(listener) {\n        return this.eventEmitter.event(listener);\n    }\n    ext() {\n        const ext = extensions.getExtension('vscode.git');\n        this.debug(3, `ext(): ${ext ? 'Extension' : 'undefined'}`);\n        // Changed to Extension\n        if (ext && !this.gitExt) {\n            this.debug(1, `ext(): Changed to Extension`);\n            this.gitExt = ext;\n            if (this.gitExt.isActive) {\n                logInfo(`[data.ts] ext(): Git extension is active`);\n                this.api(this.gitExt.exports.enabled);\n                this.gitExtListeners.push(this.gitExt.exports.onDidChangeEnablement((e) => this.api(e)));\n            }\n            else {\n                logInfo(`[data.ts] ext(): activate`);\n                void ext.activate();\n            }\n        }\n        else if (!ext && this.gitExt) {\n            this.debug(2, `[data.ts] ext(): Changed to undefined`);\n            this.gitExt = undefined;\n            this.api(false);\n            this.dispose(1);\n        }\n    }\n    api(e) {\n        this.debug(2, `api(): ${e}`);\n        if (e) {\n            this.gitApi = this.gitExt?.exports.getAPI(API_VERSION);\n            this.debug(2, `api(): ${this.gitApi ? 'gitApi' : 'undefined'}`);\n            this.listeners();\n        }\n        else {\n            this.gitApi = undefined;\n            this.dispose(2);\n        }\n        this.updateGit();\n    }\n    listeners() {\n        if (!this.gitApi) {\n            return;\n        }\n        this.gitApiListeners.push(this.gitApi.onDidOpenRepository((e) => {\n            this.debug(1, `listeners(): Open Repo ${e.rootUri.fsPath.split(sep).pop()}`);\n            this.updateGit();\n        }), this.gitApi.onDidCloseRepository((e) => {\n            this.debug(1, `listeners(): Open Close ${e.rootUri.fsPath.split(sep).pop()}`);\n            this.updateGit();\n        }), this.gitApi.onDidChangeState((e) => {\n            this.debug(1, `listeners(): Change State ${e}`);\n            this.updateGit();\n        }));\n    }\n    updateGit() {\n        this.debug(1, `[data.ts] updateGit()`);\n        if (!this.gitApi) {\n            this._repo = undefined;\n            this._remote = undefined;\n            this.eventEmitter.fire();\n            return;\n        }\n        this._repo = this.repo();\n        this._remote = this.remote();\n        this.debug(2, `updateGit(): repo ${this.gitRepoPath}`);\n        this.eventEmitter.fire();\n    }\n    repo() {\n        if (!this.gitApi) {\n            return;\n        }\n        const repos = this.gitApi.repositories;\n        if (this._file) {\n            const testString = this._file.dir;\n            return (repos\n                .filter((v) => v.rootUri.fsPath.length <= testString.length)\n                .filter((v) => v.rootUri.fsPath === testString.substring(0, v.rootUri.fsPath.length))\n                .sort((a, b) => b.rootUri.fsPath.length - a.rootUri.fsPath.length)\n                // get first element\n                .shift());\n        }\n        this.debug(3, `repo(): no file open`);\n        if (!workspace.workspaceFolders) {\n            return undefined;\n        }\n        return workspace.workspaceFolders\n            .map((v) => [v])\n            .sort((a, b) => a[0].index - b[0].index)\n            .shift()\n            ?.map((workspace) => repos\n            .filter((v) => v.rootUri.fsPath.length <= workspace.uri.fsPath.length)\n            .filter((v) => v.rootUri.fsPath ===\n            workspace.uri.fsPath.substring(0, v.rootUri.fsPath.length))\n            .sort((a, b) => a.rootUri.fsPath.length - b.rootUri.fsPath.length)\n            .shift())\n            .shift();\n    }\n    remote() {\n        const remotes = this._repo?.state.remotes;\n        if (!remotes) {\n            return;\n        }\n        return remotes.find((v) => v.name === 'origin') ?? remotes[0];\n    }\n    debug(level, message) {\n        if (this._debug >= level) {\n            logInfo(`[data.ts] ${message}`);\n        }\n    }\n}\nexport const dataClass = new Data();\n","export const isExcluded = (config, toMatch) => {\n    if (!config || !toMatch) {\n        return false;\n    }\n    if (!config.length) {\n        return false;\n    }\n    const ignorePattern = config.join('|');\n    const regex = new RegExp(ignorePattern, 'gm');\n    const excluded = regex.test(toMatch);\n    return excluded;\n};\n","import { basename } from 'path';\nimport { getConfig } from '../config';\nimport { KNOWN_EXTENSIONS, KNOWN_LANGUAGES } from '../constants';\nexport const toLower = (str) => str.toLocaleLowerCase();\nexport const toUpper = (str) => str.toLocaleUpperCase();\nexport const toTitle = (str) => toLower(str).replace(/^\\w/, (c) => toUpper(c));\nexport const getFileIcon = (name) => `https://raw.githubusercontent.com/LeonardSSH/vscord/main/assets/icons/${name}.png`;\nexport function resolveFileIcon(document) {\n    const config = getConfig();\n    const filename = basename(document.fileName);\n    const findKnownExtension = Object.keys(KNOWN_EXTENSIONS).find((key) => {\n        if (filename.endsWith(key)) {\n            return true;\n        }\n        const match = /^\\/(.*)\\/([mgiy]+)$/.exec(key);\n        if (!match) {\n            return false;\n        }\n        const regex = new RegExp(match[1], match[2]);\n        return regex.test(filename);\n    });\n    const areLanguagesPrioritized = config[\"prioritizeLanguagesOverExtensions\" /* PrioritizeLanguagesOverExtensions */];\n    const findKnownLanguage = KNOWN_LANGUAGES.find((key) => key.language === document.languageId);\n    const knownExtension = findKnownExtension\n        ? KNOWN_EXTENSIONS[findKnownExtension]\n        : findKnownLanguage\n            ? findKnownLanguage.image\n            : null;\n    const knownLanguage = findKnownLanguage ? findKnownLanguage.image : knownExtension;\n    const fileIcon = areLanguagesPrioritized ? knownLanguage : knownExtension;\n    return typeof fileIcon === 'string' ? fileIcon : fileIcon?.image ?? 'text';\n}\n","import { getConfig } from './config';\nimport { debug, DiagnosticSeverity, env, languages, window, workspace } from 'vscode';\nimport { DEBUGGING_IMAGE_KEY, EMPTY, FAKE_EMPTY, IDLE_VSCODE_IMAGE_KEY, IDLE_VSCODE_INSIDERS_IMAGE_KEY, VSCODE_IMAGE_KEY, VSCODE_INSIDERS_IMAGE_KEY } from './constants';\nimport { sep } from 'path';\nimport { dataClass } from './data';\nimport { isObject } from './helpers/isObject';\nimport { isExcluded } from './helpers/isExcluded';\nimport { getFileIcon, resolveFileIcon, toLower, toTitle, toUpper } from './helpers/resolveFileIcon';\nlet totalProblems = 0;\nexport function onDiagnosticsChange() {\n    const diagnostics = languages.getDiagnostics();\n    let counted = 0;\n    diagnostics.forEach((diagnostic) => {\n        if (diagnostic[1]) {\n            diagnostic[1].forEach((diagnostic) => {\n                if (diagnostic.severity === DiagnosticSeverity.Warning ||\n                    diagnostic.severity === DiagnosticSeverity.Error) {\n                    counted++;\n                }\n            });\n        }\n    });\n    totalProblems = counted;\n}\nexport function activity(previous = {}, isViewing = false) {\n    const config = getConfig();\n    const { appName } = env;\n    const insiders = appName.includes('Insiders');\n    const defaultSmallImageKey = debug.activeDebugSession\n        ? getFileIcon(DEBUGGING_IMAGE_KEY)\n        : insiders\n            ? getFileIcon(VSCODE_INSIDERS_IMAGE_KEY)\n            : getFileIcon(VSCODE_IMAGE_KEY);\n    const defaultSmallImageText = config[\"smallImage\" /* SmallImage */].replace(\"{app_name}\" /* AppName */, appName);\n    const defaultLargeImageText = config[\"largeImageIdling\" /* LargeImageIdling */];\n    const removeDetails = config[\"removeDetails\" /* RemoveDetails */];\n    const removeLowerDetails = config[\"removeLowerDetails\" /* RemoveLowerDetails */];\n    const removeLowerDetailsIdling = config[\"removeLowerDetailsIdling\" /* RemoveLowerDetailsIdling */];\n    let presence = {\n        details: removeDetails\n            ? undefined\n            : details(\"detailsIdling\" /* DetailsIdling */, \"detailsViewing\" /* DetailsViewing */, \"detailsEditing\" /* DetailsEditing */, \"detailsDebugging\" /* DetailsDebugging */, isViewing),\n        state: removeLowerDetails || removeLowerDetailsIdling\n            ? undefined\n            : details(\"lowerDetailsIdling\" /* LowerDetailsIdling */, \"lowerDetailsViewing\" /* LowerDetailsViewing */, \"lowerDetailsEditing\" /* LowerDetailsEditing */, \"lowerDetailsDebugging\" /* LowerDetailsDebugging */, isViewing),\n        startTimestamp: config[\"removeElapsedTime\" /* RemoveElapsedTime */]\n            ? undefined\n            : previous.startTimestamp ?? Date.now(),\n        largeImageKey: insiders\n            ? getFileIcon(IDLE_VSCODE_IMAGE_KEY)\n            : getFileIcon(IDLE_VSCODE_INSIDERS_IMAGE_KEY),\n        largeImageText: defaultLargeImageText,\n        smallImageKey: defaultSmallImageKey,\n        smallImageText: defaultSmallImageText\n    };\n    if (window.activeTextEditor) {\n        const largeImageKey = resolveFileIcon(window.activeTextEditor.document);\n        const largeImageText = config[\"largeImage\" /* LargeImage */]\n            .replace(\"{lang}\" /* LanguageLowerCase */, toLower(largeImageKey))\n            .replace(\"{Lang}\" /* LanguageTitleCase */, toTitle(largeImageKey))\n            .replace(\"{LANG}\" /* LanguageUpperCase */, toUpper(largeImageKey))\n            .padEnd(2, FAKE_EMPTY);\n        let isWorkspaceExcluded = false;\n        let workspaceExcludedText = 'No workspace ignore text provided.';\n        if (dataClass.workspaceFolder && 'uri' in dataClass.workspaceFolder) {\n            isWorkspaceExcluded = isExcluded(config[\"ignoreWorkspaces\" /* IgnoreWorkspaces */], dataClass.workspaceFolder.uri.fsPath);\n        }\n        if (isWorkspaceExcluded && dataClass.workspaceFolder && dataClass.workspaceFolder.name) {\n            const ignoreWorkspacesText = config[\"ignoreWorkspacesText\" /* IgnoreWorkspacesText */];\n            workspaceExcludedText = isObject(ignoreWorkspacesText)\n                ? // @ts-ignore Element implicitly has an 'any' type because index expression is not of type 'number'.\n                    ignoreWorkspacesText[dataClass.workspaceFolder.name]\n                : ignoreWorkspacesText\n                    ? ignoreWorkspacesText\n                    : 'No workspace ignore text provided.';\n        }\n        presence = {\n            ...presence,\n            details: removeDetails\n                ? undefined\n                : isWorkspaceExcluded\n                    ? workspaceExcludedText\n                    : details(\"detailsIdling\" /* DetailsIdling */, \"detailsViewing\" /* DetailsViewing */, \"detailsEditing\" /* DetailsEditing */, \"detailsDebugging\" /* DetailsDebugging */, isViewing),\n            state: removeLowerDetails\n                ? undefined\n                : isWorkspaceExcluded\n                    ? undefined\n                    : details(\"lowerDetailsIdling\" /* LowerDetailsIdling */, \"lowerDetailsViewing\" /* LowerDetailsViewing */, \"lowerDetailsEditing\" /* LowerDetailsEditing */, \"lowerDetailsDebugging\" /* LowerDetailsDebugging */, isViewing),\n            largeImageKey: getFileIcon(largeImageKey),\n            largeImageText\n        };\n        if (config[\"buttonEnabled\" /* ButtonEnabled */] && dataClass.gitRemoteUrl) {\n            const gitRepo = dataClass.gitRemoteUrl.toString('https').replace(/\\.git$/, '');\n            const gitOrg = dataClass.gitRemoteUrl.organization ?? dataClass.gitRemoteUrl.owner;\n            const isRepositoryExcluded = isExcluded(config[\"ignoreRepositories\" /* IgnoreRepositories */], gitRepo);\n            const isOrganizationExcluded = isExcluded(config[\"ignoreOrganizations\" /* IgnoreOrganizations */], gitOrg);\n            const isNotExcluded = !isRepositoryExcluded && !isWorkspaceExcluded && !isOrganizationExcluded;\n            if (gitRepo && config[\"buttonActiveLabel\" /* ButtonActiveLabel */] && isNotExcluded) {\n                presence = {\n                    ...presence,\n                    buttons: [\n                        {\n                            label: config[\"buttonActiveLabel\" /* ButtonActiveLabel */],\n                            url: gitRepo\n                        }\n                    ]\n                };\n            }\n            else if (!gitRepo &&\n                config[\"buttonInactiveLabel\" /* ButtonInactiveLabel */] &&\n                config[\"buttonInactiveUrl\" /* ButtonInactiveUrl */]) {\n                presence = {\n                    ...presence,\n                    buttons: [\n                        {\n                            label: config[\"buttonInactiveLabel\" /* ButtonInactiveLabel */],\n                            url: config[\"buttonInactiveUrl\" /* ButtonInactiveUrl */]\n                        }\n                    ]\n                };\n            }\n        }\n    }\n    return presence;\n}\nfunction details(idling, viewing, editing, debugging, isViewing) {\n    const config = getConfig();\n    let raw = config[idling].replace(\"{empty}\" /* Empty */, FAKE_EMPTY);\n    if (window.activeTextEditor) {\n        const noWorkspaceFound = config[\"lowerDetailsNoWorkspaceFound\" /* LowerDetailsNoWorkspaceFound */].replace(\"{empty}\" /* Empty */, FAKE_EMPTY);\n        const workspaceFolderName = dataClass.workspaceFolder\n            ? dataClass.workspaceFolder.name\n            : noWorkspaceFound;\n        const workspaceName = dataClass.workspace\n            ? dataClass.workspace.replace(\"(Workspace)\" /* VSCodeWorkspace */, EMPTY)\n            : workspaceFolderName;\n        const workspaceAndFolder = `${workspaceName}${workspaceFolderName === FAKE_EMPTY ? '' : ` - ${workspaceFolderName}`}`;\n        const fileIcon = resolveFileIcon(window.activeTextEditor.document);\n        const problems = config[\"showProblems\" /* ShowProblems */]\n            ? config[\"problemsText\" /* ProblemsText */].replace(\"{problemsCount}\" /* ProblemsCount */, totalProblems.toString())\n            : '';\n        raw = config[debug.activeDebugSession ? debugging : isViewing ? viewing : editing];\n        if (dataClass.workspace) {\n            const name = dataClass.workspace;\n            const relativePath = workspace\n                .asRelativePath(window.activeTextEditor.document.fileName)\n                .split(sep);\n            relativePath.splice(-1, 1);\n            raw = raw.replace(\"{full_dir_name}\" /* FullDirName */, `${name}${sep}${relativePath.join(sep)}`);\n        }\n        raw = fileDetails(raw, window.activeTextEditor.document, window.activeTextEditor.selection);\n        raw = raw\n            .replace(\"{file_name}\" /* FileName */, dataClass.fileName ?? FAKE_EMPTY)\n            .replace(\"{dir_name}\" /* DirName */, dataClass.dirName ?? FAKE_EMPTY)\n            .replace(\"{workspace}\" /* Workspace */, workspaceName)\n            .replace(\"{workspace_folder}\" /* WorkspaceFolder */, workspaceFolderName)\n            .replace(\"{workspace_and_folder}\" /* WorkspaceAndFolder */, workspaceAndFolder)\n            .replace(\"{lang}\" /* LanguageLowerCase */, toLower(fileIcon))\n            .replace(\"{Lang}\" /* LanguageTitleCase */, toTitle(fileIcon))\n            .replace(\"{LANG}\" /* LanguageUpperCase */, toUpper(fileIcon))\n            .replace(\"{problems}\" /* Problems */, problems)\n            .replace(\"{git_repo}\" /* GitRepo */, dataClass.gitRemoteUrl\n            ? dataClass.gitRemoteUrl.name\n            : dataClass.gitRepoName ?? FAKE_EMPTY)\n            .replace(\"{git_branch}\" /* GitBranch */, dataClass.gitBranchName ?? FAKE_EMPTY);\n    }\n    return raw;\n}\nfunction fileDetails(_raw, document, selection) {\n    let raw = _raw.slice();\n    if (raw.includes(\"{total_lines}\" /* TotalLines */)) {\n        raw = raw.replace(\"{total_lines}\" /* TotalLines */, document.lineCount.toLocaleString());\n    }\n    if (raw.includes(\"{current_line}\" /* CurrentLine */)) {\n        raw = raw.replace(\"{current_line}\" /* CurrentLine */, (selection.active.line + 1).toLocaleString());\n    }\n    if (raw.includes(\"{current_column}\" /* CurrentColumn */)) {\n        raw = raw.replace(\"{current_column}\" /* CurrentColumn */, (selection.active.character + 1).toLocaleString());\n    }\n    return raw;\n}\n","export const isObject = (value) => {\n    return value !== null && (typeof value === 'object' || typeof value === 'function');\n};\n","import { Client } from 'discord-rpc';\nimport { logError, logInfo } from './logger';\nimport { commands, debug, languages, StatusBarAlignment, window, workspace } from 'vscode';\nimport { throttle } from './helpers/throttle';\nimport { activity, onDiagnosticsChange } from './activity';\nimport { getConfig } from './config';\nimport { IDLE_SMALL_IMAGE_KEY } from './constants';\nimport { getApplicationId } from './helpers/getApplicationId';\nimport { dataClass } from './data';\nimport { getFileIcon } from './helpers/resolveFileIcon';\nlet state = {};\nlet rpc = undefined;\nlet listeners = [];\nlet idleCheckTimeout = undefined;\nlet timeout = undefined;\nconst statusBarIcon = window.createStatusBarItem(StatusBarAlignment.Left);\nstatusBarIcon.text = '$(pulse) Connecting to Discord Gateway...';\nexport const sendActivity = async (isViewing = false) => {\n    state = {\n        ...(await activity(state, isViewing))\n    };\n    await rpc?.setActivity(state);\n};\nexport const listen = () => {\n    const config = getConfig();\n    const fileSwitch = window.onDidChangeActiveTextEditor(() => sendActivity(true));\n    const fileEdit = workspace.onDidChangeTextDocument(throttle(() => sendActivity(), 2000));\n    const debugStart = debug.onDidStartDebugSession(() => sendActivity());\n    const debugEnd = debug.onDidTerminateDebugSession(() => sendActivity());\n    const diagnosticsChange = languages.onDidChangeDiagnostics(() => onDiagnosticsChange());\n    const changeWindowState = window.onDidChangeWindowState((e) => toggleIdling(e));\n    const gitListener = dataClass.onUpdate(throttle(() => sendActivity(), 2000));\n    if (config[\"showProblems\" /* ShowProblems */]) {\n        listeners.push(diagnosticsChange);\n    }\n    if (config[\"checkIdle\" /* CheckIdle */]) {\n        listeners.push(changeWindowState);\n    }\n    listeners.push(fileSwitch, fileEdit, debugStart, debugEnd, gitListener);\n};\nexport const cleanUp = () => {\n    listeners.forEach((listener) => listener.dispose());\n    listeners = [];\n};\nexport const toggleIdling = async (windowState) => {\n    const config = getConfig();\n    if (config[\"idleTimeout\" /* IdleTimeout */] !== 0) {\n        if (windowState.focused) {\n            if (idleCheckTimeout) {\n                clearTimeout(idleCheckTimeout);\n            }\n            await sendActivity();\n        }\n        else {\n            idleCheckTimeout = setTimeout(async () => {\n                state = {\n                    ...state,\n                    smallImageKey: getFileIcon(IDLE_SMALL_IMAGE_KEY),\n                    smallImageText: config[\"idleText\" /* IdleText */]\n                };\n                await rpc?.setActivity(state);\n            }, config[\"idleTimeout\" /* IdleTimeout */] * 1000);\n        }\n    }\n};\nexport const login = async () => {\n    const config = getConfig();\n    statusBarIcon.text = '$(search-refresh) Connecting to Discord Gateway...';\n    statusBarIcon.tooltip = 'Connecting to Discord Gateway...';\n    rpc = new Client({ transport: 'ipc' });\n    rpc.on('ready', async () => {\n        logInfo('Successfully connected to Discord');\n        cleanUp();\n        await sendActivity();\n        statusBarIcon.text = '$(globe) Connected to Discord';\n        statusBarIcon.tooltip = 'Connected to Discord';\n        statusBarIcon.show();\n        listen();\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n        timeout = setTimeout(() => (statusBarIcon.text = '$(smiley)'), 5000);\n    });\n    rpc.on('disconnected', () => {\n        cleanUp();\n        rpc && rpc.destroy();\n        statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway';\n        statusBarIcon.command = 'rpc.reconnect';\n        statusBarIcon.tooltip = 'Reconnect to Discord Gateway';\n        statusBarIcon.show();\n    });\n    const { clientId } = getApplicationId(config);\n    try {\n        await rpc.login({ clientId });\n        logInfo(`Successfully logged in to Discord with client ID ${clientId}`);\n    }\n    catch (error) {\n        logError(`Encountered following error while trying to login:\\n${error}`);\n        rpc && rpc.destroy();\n        logInfo(`[002] Destroyed Discord RPC client`);\n        if (!config[\"suppressNotifications\" /* SuppressNotifications */]) {\n            error?.message?.includes('ENOENT')\n                ? void window.showErrorMessage('No Discord client detected')\n                : void window.showErrorMessage(`Couldn't connect to Discord via RPC: ${error}`);\n        }\n        statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway';\n        statusBarIcon.command = 'rpc.reconnect';\n        statusBarIcon.tooltip = 'Reconnect to Discord Gateway';\n    }\n};\nexport const registerComamnds = (ctx) => {\n    const config = getConfig();\n    const enable = async (update = true) => {\n        if (update) {\n            try {\n                await config.update('enabled', true);\n            }\n            catch { }\n        }\n        cleanUp();\n        statusBarIcon.text = '$(search-refresh) Connecting to Discord Gateway...';\n        statusBarIcon.tooltip = 'Connecting to Discord Gateway...';\n        await login();\n    };\n    const disable = async (update = true) => {\n        if (update) {\n            try {\n                await config.update('enabled', false);\n            }\n            catch { }\n        }\n        cleanUp();\n        rpc && rpc.destroy();\n        logInfo(`[003] Destroyed Discord RPC client`);\n        statusBarIcon.hide();\n    };\n    const enableCommand = commands.registerCommand('rpc.enable', async () => {\n        await disable();\n        await enable();\n        logInfo('Enabled Discord Rich Presence for this workspace.');\n        if (!config[\"suppressNotifications\" /* SuppressNotifications */]) {\n            await window.showInformationMessage('Enabled Discord Rich Presence for this workspace.');\n        }\n    });\n    const disableCommand = commands.registerCommand('rpc.disable', async () => {\n        await disable();\n        logInfo('Disabled Discord Rich Presence for this workspace.');\n        if (!config[\"suppressNotifications\" /* SuppressNotifications */]) {\n            await window.showInformationMessage('Disabled Discord Rich Presence for this workspace.');\n        }\n    });\n    const reconnectCommand = commands.registerCommand('rpc.reconnect', async () => {\n        logInfo('Reconnecting to Discord Gateway...');\n        await disable(false);\n        await enable(false);\n    });\n    const disconnectCommand = commands.registerCommand('rpc.disconnect', async () => {\n        logInfo('Disconnecting from Discord Gateway...');\n        await disable(false);\n        statusBarIcon.text = '$(search-refresh) Reconnect to Discord Gateway';\n        statusBarIcon.command = 'rpc.reconnect';\n        statusBarIcon.tooltip = 'Reconnect to Discord Gateway';\n        statusBarIcon.show();\n    });\n    ctx.subscriptions.push(enableCommand, disableCommand, reconnectCommand, disconnectCommand);\n    logInfo('Registered Discord Rich Presence commands');\n};\nexport async function activate(ctx) {\n    logInfo('Discord Rich Presence for VS Code activated.');\n    registerComamnds(ctx);\n    try {\n        await login();\n    }\n    catch (error) {\n        logError(`Failed to login to Discord: ${error}`);\n    }\n}\nexport function deactivate() {\n    logInfo('Discord Rich Presence for VS Code deactivated.');\n    cleanUp();\n    if (timeout) {\n        clearTimeout(timeout);\n        timeout = undefined;\n    }\n    if (idleCheckTimeout) {\n        clearTimeout(idleCheckTimeout);\n        idleCheckTimeout = undefined;\n    }\n    rpc && rpc.destroy();\n    logInfo(`[004] Destroyed Discord RPC client`);\n}\n","export const getApplicationId = (config) => {\n    const applicationIds = new Map();\n    applicationIds.set('Code', '782685898163617802');\n    applicationIds.set('Visual Studio Code', '810516608442695700');\n    const match = /(Code|Visual Studio Code)/i.exec(config[\"appName\" /* AppName */]);\n    let clientId = config[\"id\" /* Id */];\n    if (match !== null && applicationIds.has(match[0])) {\n        clientId = applicationIds.get(match[0]);\n    }\n    return { clientId };\n};\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (\n      (ws.readyState === ws.OPEN || ws.readyState === ws.CLOSING) &&\n      !resumeOnReceiverDrain\n    ) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSED) {\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(emitClose.bind(undefined, this));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.split(',').map(trim);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n\n/**\n * Remove whitespace characters from both ends of a string.\n *\n * @param {String} str The string\n * @return {String} A new string representing `str` stripped of whitespace\n *     characters from both its beginning and end\n * @private\n */\nfunction trim(str) {\n  return str.trim();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onclose(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onerror(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onopen(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onmessage(listener) {}\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    const err = new Error(`Invalid URL: ${websocket.url}`);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (err) {\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (extensionNames.length) {\n        if (\n          extensionNames.length !== 1 ||\n          extensionNames[0] !== PerMessageDeflate.extensionName\n        ) {\n          const message =\n            'Server indicated an extension that was not requested';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        try {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n        } catch (err) {\n          const message = 'Invalid Sec-WebSocket-Extensions header';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        websocket._extensions[PerMessageDeflate.extensionName] =\n          perMessageDeflate;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"stream\");","module.exports = require(\"timers\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"zlib\");","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module doesn't tell about it's top-level declarations so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(4608);\n"],"names":["fs","path","fileURLToPath","join","dirname","exists","accessSync","e","existsSync","defaults","arrow","process","env","NODE_BINDINGS_ARROW","compiled","NODE_BINDINGS_COMPILED_DIR","platform","arch","nodePreGyp","versions","modules","version","node","bindings","try","module","exports","opts","Object","keys","map","i","module_root","getRoot","getFileName","extname","n","b","err","requireFunc","tries","l","length","apply","p","push","resolve","code","test","message","Error","a","calling_file","fileName","origPST","prepareStackTrace","origSTL","stackTraceLimit","dummy","st","__filename","captureStackTrace","indexOf","file","prev","dir","cwd","mask","source","output","offset","unmask","buffer","__dirname","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","left","slice","right","Array","prototype","concat","call","decode","input","tokens","match","encodedURI","TypeError","replace","customDecodeURIComponent","replaceMap","exec","result","entries","key","EventEmitter","fetch","transports","pid","getPid","RPCClient","constructor","options","super","this","accessToken","clientId","application","user","Transport","transport","method","data","query","endpoint","URLSearchParams","body","headers","Authorization","then","async","r","json","ok","status","on","_onRpcMessage","bind","_expecting","Map","_connectPromise","undefined","connect","Promise","reject","timeout","setTimeout","unref","once","clearTimeout","forEach","emit","catch","scopes","authorize","authenticate","request","cmd","args","evt","nonce","uuid","send","set","RPCCommands","DISPATCH","RPCEvents","READY","has","get","delete","clientSecret","rpcToken","client_id","client_secret","rpc_token","prompt","grant_type","redirect_uri","redirectUri","access_token","getGuild","id","GET_GUILD","guild_id","getGuilds","GET_GUILDS","getChannel","GET_CHANNEL","channel_id","GET_CHANNELS","channels","setCertifiedDevices","devices","SET_CERTIFIED_DEVICES","d","type","vendor","model","related","echo_cancellation","echoCancellation","noise_suppression","noiseSuppression","automatic_gain_control","automaticGainControl","hardware_mute","hardwareMute","setUserVoiceSettings","settings","SET_USER_VOICE_SETTINGS","user_id","pan","mute","volume","selectVoiceChannel","SELECT_VOICE_CHANNEL","force","selectTextChannel","SELECT_TEXT_CHANNEL","getVoiceSettings","GET_VOICE_SETTINGS","s","qos","silenceWarning","silence_warning","deaf","availableDevices","available_devices","device","device_id","mode","autoThreshold","auto_threshold","threshold","shortcut","delay","setVoiceSettings","SET_VOICE_SETTINGS","captureShortcut","callback","subid","subKey","event","JSON","stringify","CAPTURE_SHORTCUT_CHANGE","stop","_subscriptions","CAPTURE_SHORTCUT","action","setActivity","timestamps","assets","party","secrets","startTimestamp","endTimestamp","start","end","Date","Math","round","getTime","RangeError","largeImageKey","largeImageText","smallImageKey","smallImageText","large_image","large_text","small_image","small_text","partySize","partyId","partyMax","size","matchSecret","joinSecret","spectateSecret","spectate","SET_ACTIVITY","activity","state","details","buttons","instance","clearActivity","sendJoinInvite","SEND_ACTIVITY_JOIN_INVITE","sendJoinRequest","SEND_ACTIVITY_JOIN_REQUEST","closeJoinRequest","CLOSE_ACTIVITY_JOIN_REQUEST","createLobby","capacity","metadata","CREATE_LOBBY","updateLobby","lobby","UPDATE_LOBBY","owner_id","owner","deleteLobby","DELETE_LOBBY","connectToLobby","secret","CONNECT_TO_LOBBY","sendToLobby","SEND_TO_LOBBY","disconnectFromLobby","DISCONNECT_FROM_LOBBY","updateLobbyMember","UPDATE_LOBBY_MEMBER","lobby_id","getRelationships","types","RelationshipTypes","GET_RELATIONSHIPS","o","relationships","SUBSCRIBE","unsubscribe","UNSUBSCRIBE","close","keyMirror","arr","tmp","value","browser","window","RPCErrors","CAPTURE_SHORTCUT_ALREADY_LISTENING","GET_GUILD_TIMED_OUT","INVALID_ACTIVITY_JOIN_REQUEST","INVALID_ACTIVITY_SECRET","INVALID_CHANNEL","INVALID_CLIENTID","INVALID_COMMAND","INVALID_ENTITLEMENT","INVALID_EVENT","INVALID_GIFT_CODE","INVALID_GUILD","INVALID_INVITE","INVALID_LOBBY","INVALID_LOBBY_SECRET","INVALID_ORIGIN","INVALID_PAYLOAD","INVALID_PERMISSIONS","INVALID_TOKEN","INVALID_USER","LOBBY_FULL","NO_ELIGIBLE_ACTIVITY","OAUTH2_ERROR","PURCHASE_CANCELED","PURCHASE_ERROR","RATE_LIMITED","SELECT_CHANNEL_TIMED_OUT","SELECT_VOICE_FORCE_REQUIRED","SERVICE_UNAVAILABLE","TRANSACTION_ABORTED","UNAUTHORIZED_FOR_ACHIEVEMENT","UNKNOWN_ERROR","RPCCloseCodes","CLOSE_NORMAL","CLOSE_UNSUPPORTED","CLOSE_ABNORMAL","RATELIMITED","TOKEN_REVOKED","INVALID_VERSION","INVALID_ENCODING","LobbyTypes","PRIVATE","PUBLIC","NONE","FRIEND","BLOCKED","PENDING_INCOMING","PENDING_OUTGOING","IMPLICIT","util","Client","register","ipc","websocket","net","OPCodes","getIPC","getIPCPath","XDG_RUNTIME_DIR","TMPDIR","TMP","TEMP","onerror","sock","createConnection","removeListener","findEndpoint","encode","op","len","Buffer","byteLength","packet","alloc","writeInt32LE","write","working","full","socket","read","raw","readInt32LE","toString","parse","IPCTransport","client","onClose","v","pause","ping","WebSocket","WebSocketTransport","ws","port","origin","onopen","onOpen","onclose","onError","onmessage","onMessage","wasClean","error","app","setAsDefaultProtocolClient","random","pathFile","getElectronPath","executablePath","readFileSync","ELECTRON_OVERRIDE_DIST_PATH","sep","fileUriToPath","uri","substring","rest","decodeURI","firstSlash","host","obj","predicate","ret","isArr","isArray","val","parseUrl","isSsh","gitUp","token","splits","protocols","protocol","href","gitUrlParse","url","urlInfo","sourceParts","resource","git_suffix","pathname","name","organization","full_name","filepath","ref","nameIndex","dashIndex","blobIndex","treeIndex","commitIndex","srcIndex","rawIndex","commit","filepathtype","offsetNameIndex","startsWith","matches","at","maybeGitSuffix","buildToken","includes","buildPath","prots","urlPortPattern","os","runtimeRequire","vars","config","variables","prebuildsOnly","PREBUILDS_ONLY","abi","runtime","isElectron","electron","ELECTRON_RUN_AS_NODE","libc","LIBC","isAlpine","armv","ARM_VERSION","arm_version","uv","load","readdirSync","getFirst","filter","files","matchBuild","parseTuple","architectures","every","Boolean","matchTuple","tuple","compareTuples","parseTags","tags","specificity","pop","tag","napi","matchTags","runtimeAgnostic","compareTags","toUpperCase","release","debug","prebuild","nearby","execPath","target","sort","prebuilds","winner","testParameter","filters","some","urlString","defaultProtocol","normalizeProtocol","forceHttp","forceHttps","stripAuthentication","stripHash","stripTextFragment","stripWWW","removeQueryParameters","removeTrailingSlash","removeSingleSlash","removeDirectoryIndex","sortQueryParameters","trim","groups","mediaType","hash","isBase64","mimeType","shift","toLowerCase","normalizedMediaType","attribute","string","unshift","normalizeDataURL","hasRelativeProtocol","urlObj","URL","username","password","_","pathComponents","lastComponent","hostname","searchParams","search","oldUrlString","endsWith","stripProtocol","qs","parsePath","create","protocolIndex","parts","firstChar","charAt","Number","isNaN","_typeof","Symbol","iterator","normalizeUrl","normalize","arguments","parsed","first","index","strictUriEncode","decodeComponent","splitOnFirst","filterObject","validateArrayFormatSeparator","strict","encodeURIComponent","keysSorter","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","parseBooleans","assign","arrayFormat","arrayFormatSeparator","formatter","parserForArrayFormat","accumulator","isEncodedArray","newValue","item","param","k","reduce","object","shouldFilter","skipNull","skipEmptyString","encoderForArrayFormat","objectCopy","x","url_","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryFromUrl","parsedQueryFromUrl","queryString","getHash","pick","exclude","exclusionFilter","registerProtocolHandler","separator","separatorIndex","str","charCodeAt","punycode","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","findStatus","mid","floor","regexAstralSymbols","countSymbols","combiningMarksRegex","validateLabel","label","processing_option","substr","toUnicode","codePointAt","processing","domain_name","useSTD3","mapChars","hasError","processed","codePoint","String","fromCodePoint","labels","validation","toASCII","verifyDnsLength","total","domain","require","outputChannel","LogLevel","logMessage","logLevel","timestamp","toLocaleTimeString","appendLine","stack","logInfo","logError","throttle","fn","lastCalled","now","getConfig","workspace","CONFIG_KEYS","REPLACE_KEYS","dataClass","Data","_file","_repo","_remote","_debug","eventEmitter","rootListeners","gitExtListeners","gitApiListeners","gitExt","gitApi","debugLevel","ext","api","enabled","document","updateGit","extensions","dirName","fullDirName","workspaceFolder","gitRepoPath","rootUri","fsPath","gitRepoName","gitRemoteName","gitRemoteUrl","fetchUrl","pushUrl","gitBranchName","HEAD","dispose","level","disposeOf","disposable","onUpdate","listener","isActive","onDidChangeEnablement","activate","getAPI","listeners","onDidOpenRepository","onDidCloseRepository","onDidChangeState","fire","repo","remote","repos","repositories","testString","remotes","find","isExcluded","toMatch","ignorePattern","toLower","toLocaleLowerCase","toUpper","toLocaleUpperCase","toTitle","c","getFileIcon","resolveFileIcon","filename","basename","findKnownExtension","KNOWN_EXTENSIONS","areLanguagesPrioritized","findKnownLanguage","KNOWN_LANGUAGES","language","languageId","knownExtension","image","knownLanguage","fileIcon","totalProblems","previous","isViewing","insiders","appName","defaultSmallImageKey","defaultSmallImageText","defaultLargeImageText","removeDetails","removeLowerDetails","removeLowerDetailsIdling","presence","padEnd","isWorkspaceExcluded","workspaceExcludedText","ignoreWorkspacesText","gitRepo","gitOrg","isRepositoryExcluded","isOrganizationExcluded","isNotExcluded","idling","viewing","editing","debugging","noWorkspaceFound","workspaceFolderName","workspaceName","workspaceAndFolder","problems","relativePath","splice","fileDetails","_raw","selection","lineCount","toLocaleString","active","line","character","rpc","idleCheckTimeout","statusBarIcon","StatusBarAlignment","text","sendActivity","listen","fileSwitch","fileEdit","debugStart","debugEnd","diagnosticsChange","languages","onDiagnosticsChange","diagnostics","counted","diagnostic","severity","DiagnosticSeverity","changeWindowState","toggleIdling","gitListener","cleanUp","windowState","focused","login","tooltip","show","destroy","command","applicationIds","getApplicationId","registerComamnds","ctx","enable","update","disable","hide","enableCommand","commands","disableCommand","reconnectCommand","disconnectCommand","subscriptions","deactivate","isValidUTF8","buf","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","pow","upperBound","moduloVal","moduloBitLength","moduloBound","V","enforceRange","isFinite","abs","clamp","evenRound","treatNullAsEmptyString","S","U","usm","implementation","URLImpl","constructorArgs","base","parsedBase","basicURLParse","parsedURL","baseURL","_url","serializeURL","serializeURLOrigin","scheme","stateOverride","cannotHaveAUsernamePasswordPort","setTheUsername","setThePassword","serializeHost","serializeInteger","cannotBeABaseURL","fragment","toJSON","utils","Impl","impl","implSymbol","setup","is","defineProperty","enumerable","configurable","privateData","wrapper","wrapperSymbol","interface","expose","Window","Worker","tr46","specialSchemes","ftp","gopher","http","https","wss","failure","ucs2","idx","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","isWindowsDriveLetterString","isSpecialScheme","isSpecial","percentEncode","hex","isC0ControlPercentEncode","extraPathPercentEncodeSet","Set","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","utf8PercentEncode","parseIPv4Number","R","parseInt","parseHost","isSpecialArg","parseIPv6","address","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","number","swaps","temp","parseOpaqueHost","containsForbiddenHostCodePointExcludingPercent","decoded","utf8PercentDecode","asciiDomain","containsForbiddenHostCodePoint","ipv4Host","parseIPv4","numbers","part","ipv4","counter","serializeIPv4","serializeIPv6","findLongestZeroSequence","maxIdx","maxLen","currStart","currLen","ignore0","shortenPath","isNormalizedWindowsDriveLetter","includesCredentials","URLStateMachine","encodingOverride","parseError","res","trimControlChars","trimTabAndNewline","atFlag","arrFlag","passwordTokenSeenFlag","parseSchemeStart","parseScheme","isASCIIAlphanumeric","parseNoScheme","parseSpecialRelativeOrAuthority","parsePathOrAuthority","parseRelative","parseRelativeSlash","parseSpecialAuthoritySlashes","parseSpecialAuthorityIgnoreSlashes","parseAuthority","encodedCodePoints","parseHostName","parsePort","defaultPort","fileOtherwiseCodePoints","parseFile","isWindowsDriveLetterCodePoints","cp1","cp2","parseFileSlash","isNormalizedWindowsDriveLetterString","parseFileHost","parsePathStart","isDoubleDot","parseCannotBeABaseURLPath","parseQuery","parseFragment","excludeFragment","parseURL","serializeOrigin","integer","mixin","getOwnPropertyNames","getOwnPropertyDescriptor","wrapperForImpl","implForWrapper","createWebSocketStream","Server","Receiver","Sender","list","totalLength","EMPTY_BUFFER","allocUnsafe","_mask","_unmask","toArrayBuffer","byteOffset","toBuffer","readOnly","isBuffer","ArrayBuffer","from","isView","bufferUtil","bu","BufferUtil","BINARY_TYPES","GUID","kStatusCode","kWebSocket","NOOP","Event","MessageEvent","CloseEvent","reason","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","EventTarget","addEventListener","_listener","removeEventListener","tokenChars","dest","elem","format","extension","configurations","params","values","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","kDone","kRun","Limiter","concurrency","pending","Infinity","jobs","add","job","zlib","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","reset","inflateOnError","_inflate","PerMessageDeflate","isServer","maxPayload","_options","_threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","cleanup","accepted","response","num","isInteger","decompress","fin","done","_decompress","_compress","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","ErrorCtor","prefix","statusCode","errorCode","Writable","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","_write","encoding","cb","startLoop","consume","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","readUInt16BE","readUInt32BE","controlMessage","dataMessage","er","messageLength","fragments","isValidStatusCode","applyMask","_socket","_firstFragment","_deflating","_queue","static","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","randomFillSync","enqueue","doClose","sendFrame","frame","doPing","pong","doPong","perMessageDeflate","binary","dispatch","destroyed","dequeue","Reflect","cork","uncork","emitClose","stream","duplexOnEnd","_writableState","finished","duplexOnError","listenerCount","resumeOnReceiverDrain","terminateOnDestroy","receiverOnDrain","resume","readyState","CONNECTING","open","_receiver","removeAllListeners","duplex","Duplex","autoDestroy","objectMode","writableObjectMode","msg","_destroy","CLOSED","nextTick","called","terminate","_final","finish","_read","OPEN","CLOSING","needDrain","_isValidUTF8","Validation","keyRegex","server","socketOnError","abortHandshake","writable","STATUS_CODES","Connection","h","WebSocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","req","writeHead","emitConnection","_removeListeners","addListeners","removeListeners","listening","upgrade","head","handleUpgrade","clients","shouldHandle","info","secure","authorized","encrypted","verified","completeUpgrade","readable","createHash","digest","_protocol","setSocket","tls","readyStates","protocolVersions","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","bufferedAmount","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","socketOnClose","socketOnData","socketOnEnd","_req","errorEmitted","sendAfterClose","protocolVersion","followRedirects","maxRedirects","socketPath","parsedUrl","isUnixSocket","emitErrorAndClose","isSecure","randomBytes","tlsConnect","netConnect","Upgrade","handshakeTimeout","Origin","auth","aborted","location","addr","abort","serverProt","protList","protError","secWebSocketExtensions","extensionNames","servername","isIP","setHeader","receiverOnFinish","property","Readable","BUFFER","TYPE","Blob","blobParts","buffers","element","arrayBuffer","ab","relativeStart","relativeEnd","max","min","span","slicedBuffer","blob","FetchError","systemError","errno","convert","defineProperties","toStringTag","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","disturbed","consumeBody","_this4","accum","accumBytes","resTimeout","append","getAll","clone","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","_this2","textConverted","_this3","convertBody","charset","mixIn","proto","desc","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","MAP","Headers","init","rawHeaders","headerNames","headerName","pairs","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","INTERNAL","HeadersIteratorPrototype","setPrototypeOf","next","getPrototypeOf","_INTERNAL","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","Response","contentType","statusText","redirected","INTERNALS$2","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","Request","inputBody","signal","isAbortSignal","redirect","follow","agent","AbortError","URL$1","PassThrough$1","getNodeRequestOptions","contentLengthValue","totalBytes","abortAndFinalize","finalize","reqTimeout","createHeadersLenient","isRedirect","locationURL","requestOpts","isDomainOrSubdomain","destination","original","orig","response_options","statusMessage","codings","zlibOptions","finishFlush","writeToStream","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","prop","hasOwnProperty","__webpack_exports__"],"sourceRoot":""}